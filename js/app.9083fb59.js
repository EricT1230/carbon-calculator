(function(){"use strict";var e={6286:function(e,n,t){var o=t(5130),a=t(6768),i=t(4232);const r={id:"app"},l=(0,a.Lk)("header",null,[(0,a.Lk)("h1",null,"餐點碳排放計算機"),(0,a.Lk)("p",null,"計算您餐點的碳排放量，助力環保")],-1),u={class:"ingredient-selection"},s=(0,a.Lk)("h2",null,[(0,a.eW)("食材類 "),(0,a.Lk)("small",{style:{"font-size":"0.4em",color:"gray","margin-left":"4px"}},"(按 + 可新增)")],-1),c=["onUpdate:modelValue","onChange"],d=(0,a.Lk)("option",{value:""},"選擇種類",-1),g=["value"],m=["onUpdate:modelValue","onChange"],p=(0,a.Lk)("option",{value:""},"選擇名稱",-1),v=["value"],h=["onUpdate:modelValue","onInput","placeholder"],f={class:"ingredient-selection"},y=(0,a.Lk)("h2",null,"能源類",-1),k=["onUpdate:modelValue","onChange"],b=(0,a.Lk)("option",{value:""},"選擇種類",-1),C=["value"],_=["onUpdate:modelValue","onChange"],L=(0,a.Lk)("option",{value:""},"選擇名稱",-1),w=["value"],E=["onUpdate:modelValue","onInput","placeholder"],F={class:"ingredient-selection"},I=(0,a.Lk)("h2",null,"運輸類",-1),X=["onUpdate:modelValue","onChange"],U=(0,a.Lk)("option",{value:""},"選擇種類",-1),V=["value"],K=["onUpdate:modelValue","onChange"],O=(0,a.Lk)("option",{value:""},"選擇名稱",-1),R=["value"],T=["onUpdate:modelValue","onInput","placeholder"],j={class:"button-group"},x={class:"results"},S=(0,a.Lk)("h2",null,"總碳排放量",-1),P={id:"total-emission"},A={class:"comparison"},J={id:"trees-saved"},M=(0,a.Lk)("footer",null,[(0,a.Lk)("p",null,"© 2024 餐點碳排放計算機 | 聯絡我們：(089)326141~326146")],-1);function W(e,n,t,W,z,$){return(0,a.uX)(),(0,a.CE)("div",r,[l,(0,a.Lk)("main",null,[(0,a.Lk)("section",u,[s,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(W.ingredientsForFood,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{class:"ingredient-row",key:t},[(0,a.bo)((0,a.Lk)("select",{class:"ingredient-category","onUpdate:modelValue":n=>e.category=n,onChange:e=>W.fetchItems(t,"food")},[d,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(W.categories.filter((e=>2===e.category_type)),(e=>((0,a.uX)(),(0,a.CE)("option",{key:e.category_id,value:e.category_id},(0,i.v_)(e.category_name),9,g)))),128))],40,c),[[o.u1,e.category]]),(0,a.bo)((0,a.Lk)("select",{class:"ingredient-name","onUpdate:modelValue":n=>e.name=n,onChange:e=>W.updateCarbonEmission(t,"food")},[p,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.items,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e.item_id,value:e.item_id},(0,i.v_)(e.item_name),9,v)))),128))],40,m),[[o.u1,e.name]]),(0,a.bo)((0,a.Lk)("input",{type:"number",class:"ingredient-weight","onUpdate:modelValue":n=>e.weight=n,onInput:e=>W.updateCarbonEmission(t,"food"),placeholder:e.unit||"請輸入數值"},null,40,h),[[o.Jo,e.weight,void 0,{number:!0}]]),(0,a.Lk)("button",{class:"add-row",onClick:n[0]||(n[0]=e=>W.addRow("food"))},"+")])))),128))])]),(0,a.Lk)("main",null,[(0,a.Lk)("section",f,[y,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(W.ingredientsForEnergy,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{class:"ingredient-row",key:t},[(0,a.bo)((0,a.Lk)("select",{class:"ingredient-category","onUpdate:modelValue":n=>e.category=n,onChange:e=>W.fetchItems(t,"energy")},[b,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(W.categories.filter((e=>3===e.category_type)),(e=>((0,a.uX)(),(0,a.CE)("option",{key:e.category_id,value:e.category_id},(0,i.v_)(e.category_name),9,C)))),128))],40,k),[[o.u1,e.category]]),(0,a.bo)((0,a.Lk)("select",{class:"ingredient-name","onUpdate:modelValue":n=>e.name=n,onChange:e=>W.updateCarbonEmission(t,"energy")},[L,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.items,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e.item_id,value:e.item_id},(0,i.v_)(e.item_name),9,w)))),128))],40,_),[[o.u1,e.name]]),(0,a.bo)((0,a.Lk)("input",{type:"number",class:"ingredient-weight","onUpdate:modelValue":n=>e.weight=n,onInput:e=>W.updateCarbonEmission(t,"energy"),placeholder:e.unit||"請輸入數值"},null,40,E),[[o.Jo,e.weight,void 0,{number:!0}]]),(0,a.Lk)("button",{class:"add-row",onClick:n[1]||(n[1]=e=>W.addRow("energy"))},"+")])))),128))])]),(0,a.Lk)("main",null,[(0,a.Lk)("section",F,[I,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(W.ingredientsForTransport,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{class:"ingredient-row",key:t},[(0,a.bo)((0,a.Lk)("select",{class:"ingredient-category","onUpdate:modelValue":n=>e.category=n,onChange:e=>W.fetchItems(t,"transport")},[U,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(W.categories.filter((e=>1===e.category_type)),(e=>((0,a.uX)(),(0,a.CE)("option",{key:e.category_id,value:e.category_id},(0,i.v_)(e.category_name),9,V)))),128))],40,X),[[o.u1,e.category]]),(0,a.bo)((0,a.Lk)("select",{class:"ingredient-name","onUpdate:modelValue":n=>e.name=n,onChange:e=>W.updateCarbonEmission(t,"transport")},[O,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.items,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e.item_id,value:e.item_id},(0,i.v_)(e.item_name),9,R)))),128))],40,K),[[o.u1,e.name]]),(0,a.bo)((0,a.Lk)("input",{type:"number",class:"ingredient-weight","onUpdate:modelValue":n=>e.weight=n,onInput:e=>W.updateCarbonEmission(t,"transport"),placeholder:e.unit||"請輸入數值"},null,40,T),[[o.Jo,e.weight,void 0,{number:!0}]]),(0,a.Lk)("button",{class:"add-row",onClick:n[2]||(n[2]=e=>W.addRow("transport"))},"+")])))),128))])]),(0,a.Lk)("main",null,[(0,a.Lk)("div",j,[(0,a.Lk)("button",{class:"reset-button",onClick:n[3]||(n[3]=(...e)=>W.resetCalculator&&W.resetCalculator(...e))},"重新計算"),(0,a.Lk)("button",{class:"calculate-button",onClick:n[4]||(n[4]=(...e)=>W.calculateEmissions&&W.calculateEmissions(...e))},"計算碳排放")]),(0,a.Lk)("section",x,[S,(0,a.Lk)("p",P,(0,i.v_)(W.totalEmission.toFixed(2))+" kg CO₂e",1),(0,a.Lk)("div",A,[(0,a.Lk)("p",null,[(0,a.Lk)("span",J,(0,i.v_)(W.treesSaved),1),(0,a.eW)(" 棵樹木一個月的吸收量")])])])]),M])}t(4114);var z=t(144),$=t(4781),q={setup(){const e=(0,z.KR)([]),n=(0,z.KR)([{category:"",name:"",weight:"",items:[],carbon_emission:0}]),t=(0,z.KR)([{category:"",name:"",weight:"",items:[],carbon_emission:0}]),o=(0,z.KR)([{category:"",name:"",weight:"",items:[],carbon_emission:0}]),a=(0,z.KR)(0),i=(0,z.KR)(0),r=(0,z.KR)(0),l=()=>{$.A.get("http://localhost:3001/api/categories").then((n=>{e.value=n.data})).catch((e=>{console.error("There was an error fetching categories!",e)}))},u=(e,a)=>{let i;"food"===a?i=n:"energy"===a?i=t:"transport"===a&&(i=o);const r=i.value[e].category;r&&$.A.get(`http://localhost:3001/api/items/${r}`).then((n=>{i.value[e].items=n.data,i.value[e].name=""})).catch((e=>{console.error("There was an error fetching items!",e)}))},s=(e,a)=>{let i;"food"===a?i=n:"energy"===a?i=t:"transport"===a&&(i=o);const r=i.value[e];r.weight<0&&(alert("重量不可为负值！"),r.weight=0);const l=r.items.find((e=>e.item_id===r.name));l?(r.carbon_emission=l.carbon_emission*r.weight,r.unit=l.unit||""):(r.carbon_emission=0,r.unit="")},c=e=>{const a={category:"",name:"",weight:"",items:[],carbon_emission:0};"food"===e?n.value.push(a):"energy"===e?t.value.push(a):"transport"===e&&o.value.push(a)},d=()=>{a.value=[...n.value,...t.value,...o.value].reduce(((e,n)=>e+n.carbon_emission),0),i.value=5*a.value,r.value=(a.value/.625).toFixed(1)},g=()=>{n.value=[{category:"",name:"",weight:"",items:[],carbon_emission:0}],t.value=[{category:"",name:"",weight:"",items:[],carbon_emission:0}],o.value=[{category:"",name:"",weight:"",items:[],carbon_emission:0}],a.value=0,i.value=0,r.value=0};return l(),{categories:e,ingredientsForFood:n,ingredientsForEnergy:t,ingredientsForTransport:o,totalEmission:a,carTravel:i,treesSaved:r,fetchItems:u,updateCarbonEmission:s,addRow:c,calculateEmissions:d,resetCalculator:g}}},B=t(1241);const D=(0,B.A)(q,[["render",W]]);var G=D;(0,o.Ef)(G).mount("#app")}},n={};function t(o){var a=n[o];if(void 0!==a)return a.exports;var i=n[o]={exports:{}};return e[o].call(i.exports,i,i.exports,t),i.exports}t.m=e,function(){var e=[];t.O=function(n,o,a,i){if(!o){var r=1/0;for(c=0;c<e.length;c++){o=e[c][0],a=e[c][1],i=e[c][2];for(var l=!0,u=0;u<o.length;u++)(!1&i||r>=i)&&Object.keys(t.O).every((function(e){return t.O[e](o[u])}))?o.splice(u--,1):(l=!1,i<r&&(r=i));if(l){e.splice(c--,1);var s=a();void 0!==s&&(n=s)}}return n}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[o,a,i]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};t.O.j=function(n){return 0===e[n]};var n=function(n,o){var a,i,r=o[0],l=o[1],u=o[2],s=0;if(r.some((function(n){return 0!==e[n]}))){for(a in l)t.o(l,a)&&(t.m[a]=l[a]);if(u)var c=u(t)}for(n&&n(o);s<r.length;s++)i=r[s],t.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return t.O(c)},o=self["webpackChunkcarbon_calculator"]=self["webpackChunkcarbon_calculator"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}();var o=t.O(void 0,[504],(function(){return t(6286)}));o=t.O(o)})();
//# sourceMappingURL=app.9083fb59.js.map