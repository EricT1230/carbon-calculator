(function(){"use strict";var e={3221:function(e,n,t){var o=t(5130),a=t(6768),i=t(4232);const r={id:"app"},u=(0,a.Lk)("header",null,[(0,a.Lk)("h1",null,"餐點碳排放計算機"),(0,a.Lk)("p",null,"計算您餐點的碳排放量，助力環保")],-1),l={class:"ingredient-selection"},s=["onUpdate:modelValue","onChange"],c=(0,a.Lk)("option",{value:""},"選擇種類",-1),d=["value"],p=["onUpdate:modelValue","onChange"],v=(0,a.Lk)("option",{value:""},"選擇名稱",-1),m=["value"],f=["onUpdate:modelValue","onInput","placeholder"],g={class:"button-group"},h={class:"results"},b=(0,a.Lk)("h2",null,"總碳排放量",-1),k={id:"total-emission"},y={class:"comparison"},w={id:"trees-saved"},_=(0,a.Lk)("footer",null,[(0,a.Lk)("p",null,"© 2024 餐點碳排放計算機 | 聯絡我們：(089)326141~326146")],-1);function C(e,n,t,C,L,E){return(0,a.uX)(),(0,a.CE)("div",r,[u,(0,a.Lk)("main",null,[(0,a.Lk)("section",l,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(C.ingredients,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{class:"ingredient-row",key:t},[(0,a.bo)((0,a.Lk)("select",{class:"ingredient-category","onUpdate:modelValue":n=>e.category=n,onChange:e=>C.fetchItems(t)},[c,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(C.categories,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e.category_id,value:e.category_id},(0,i.v_)(e.category_name),9,d)))),128))],40,s),[[o.u1,e.category]]),(0,a.bo)((0,a.Lk)("select",{class:"ingredient-name","onUpdate:modelValue":n=>e.name=n,onChange:e=>C.updateCarbonEmission(t)},[v,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.items,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e.item_id,value:e.item_id},(0,i.v_)(e.item_name),9,m)))),128))],40,p),[[o.u1,e.name]]),(0,a.bo)((0,a.Lk)("input",{type:"number",class:"ingredient-weight","onUpdate:modelValue":n=>e.weight=n,onInput:e=>C.updateCarbonEmission(t),placeholder:e.unit||"請輸入數值"},null,40,f),[[o.Jo,e.weight,void 0,{number:!0}]]),(0,a.Lk)("button",{class:"add-row",onClick:n[0]||(n[0]=(...e)=>C.addRow&&C.addRow(...e))},"+")])))),128))]),(0,a.Lk)("div",g,[(0,a.Lk)("button",{class:"reset-button",onClick:n[1]||(n[1]=(...e)=>C.resetCalculator&&C.resetCalculator(...e))},"重新計算"),(0,a.Lk)("button",{class:"calculate-button",onClick:n[2]||(n[2]=(...e)=>C.calculateEmissions&&C.calculateEmissions(...e))},"計算碳排放")]),(0,a.Lk)("section",h,[b,(0,a.Lk)("p",k,(0,i.v_)(C.totalEmission.toFixed(2))+" kg CO₂e",1),(0,a.Lk)("div",y,[(0,a.Lk)("p",null,[(0,a.Lk)("span",w,(0,i.v_)(C.treesSaved),1),(0,a.eW)(" 棵樹木一個月的吸收量")])])])]),_])}t(4114);var L=t(144),E=t(4781),O={setup(){const e=(0,L.KR)([]),n=(0,L.KR)([{category:"",name:"",weight:"",items:[],carbon_emission:0}]),t=(0,L.KR)(0),o=(0,L.KR)(0),a=(0,L.KR)(0),i=()=>{E.A.get("http://localhost:3001/api/categories").then((n=>{e.value=n.data})).catch((e=>{console.error("There was an error fetching categories!",e)}))},r=e=>{const t=n.value[e].category;t&&E.A.get(`http://localhost:3001/api/items/${t}`).then((t=>{n.value[e].items=t.data,n.value[e].name=""})).catch((e=>{console.error("There was an error fetching items!",e)}))},u=e=>{const t=n.value[e];t.weight<0&&(alert("重量不可为负值！"),t.weight=0);const o=t.items.find((e=>e.item_id===t.name));o?(t.carbon_emission=o.carbon_emission*t.weight,t.unit=o.unit||""):(t.carbon_emission=0,t.unit="")},l=()=>{n.value.push({category:"",name:"",weight:"",items:[],carbon_emission:0})},s=()=>{t.value=n.value.reduce(((e,n)=>e+n.carbon_emission),0),o.value=5*t.value,a.value=(t.value/.625).toFixed(1)},c=()=>{n.value=[{category:"",name:"",weight:"",items:[],carbon_emission:0}],t.value=0,o.value=0,a.value=0};return i(),{categories:e,ingredients:n,totalEmission:t,carTravel:o,treesSaved:a,fetchItems:r,updateCarbonEmission:u,addRow:l,calculateEmissions:s,resetCalculator:c}}},j=t(1241);const K=(0,j.A)(O,[["render",C]]);var R=K;(0,o.Ef)(R).mount("#app")}},n={};function t(o){var a=n[o];if(void 0!==a)return a.exports;var i=n[o]={exports:{}};return e[o].call(i.exports,i,i.exports,t),i.exports}t.m=e,function(){var e=[];t.O=function(n,o,a,i){if(!o){var r=1/0;for(c=0;c<e.length;c++){o=e[c][0],a=e[c][1],i=e[c][2];for(var u=!0,l=0;l<o.length;l++)(!1&i||r>=i)&&Object.keys(t.O).every((function(e){return t.O[e](o[l])}))?o.splice(l--,1):(u=!1,i<r&&(r=i));if(u){e.splice(c--,1);var s=a();void 0!==s&&(n=s)}}return n}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[o,a,i]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};t.O.j=function(n){return 0===e[n]};var n=function(n,o){var a,i,r=o[0],u=o[1],l=o[2],s=0;if(r.some((function(n){return 0!==e[n]}))){for(a in u)t.o(u,a)&&(t.m[a]=u[a]);if(l)var c=l(t)}for(n&&n(o);s<r.length;s++)i=r[s],t.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return t.O(c)},o=self["webpackChunkcarbon_calculator"]=self["webpackChunkcarbon_calculator"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}();var o=t.O(void 0,[504],(function(){return t(3221)}));o=t.O(o)})();
//# sourceMappingURL=app.b873e776.js.map