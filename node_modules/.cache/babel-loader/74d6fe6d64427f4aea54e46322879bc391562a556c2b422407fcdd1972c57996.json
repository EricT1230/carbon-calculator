{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n  id: \"app\"\n};\nconst _hoisted_2 = /*#__PURE__*/_createStaticVNode(\"<header><nav class=\\\"navbar fixed-top navbar-expand-lg navbar-dark\\\" style=\\\"background-color:#6abf69;\\\"><div class=\\\"container-fluid\\\"><a class=\\\"navbar-brand\\\" href=\\\"index.html\\\">台東減碳x慢食遊</a><button class=\\\"navbar-toggler\\\" type=\\\"button\\\" data-bs-toggle=\\\"collapse\\\" data-bs-target=\\\"#navbarNav\\\" aria-controls=\\\"navbarNav\\\" aria-expanded=\\\"false\\\" aria-label=\\\"Toggle navigation\\\"><span class=\\\"navbar-toggler-icon\\\"></span></button><div class=\\\"collapse navbar-collapse\\\" id=\\\"navbarNav\\\"><ul class=\\\"navbar-nav\\\"><li class=\\\"nav-item\\\"><a class=\\\"nav-link\\\" href=\\\"#\\\">碳排計算機</a></li><li class=\\\"nav-item\\\"><a class=\\\"nav-link\\\" href=\\\"slowfood_info.html\\\">慢食趣</a></li><li class=\\\"nav-item\\\"><a class=\\\"nav-link active\\\" aria-current=\\\"page\\\" href=\\\"carbon_info.html\\\">減碳資訊及平台介紹</a></li><li class=\\\"nav-item\\\"><a class=\\\"nav-link\\\" href=\\\"restaurent_info.html\\\">餐廳介紹</a></li></ul></div></div></nav></header>\", 1);\nconst _hoisted_3 = {\n  class: \"ingredient-selection\"\n};\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"h2\", null, [/*#__PURE__*/_createTextVNode(\"食材類 \"), /*#__PURE__*/_createElementVNode(\"small\", {\n  style: {\n    \"font-size\": \"0.4em\",\n    \"color\": \"gray\",\n    \"margin-left\": \"4px\"\n  }\n}, \"(按 + 可新增)\")], -1 /* HOISTED */);\nconst _hoisted_5 = [\"onUpdate:modelValue\", \"onChange\"];\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"\"\n}, \"選擇種類\", -1 /* HOISTED */);\nconst _hoisted_7 = [\"value\"];\nconst _hoisted_8 = [\"onUpdate:modelValue\", \"onChange\"];\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"\"\n}, \"選擇名稱\", -1 /* HOISTED */);\nconst _hoisted_10 = [\"value\"];\nconst _hoisted_11 = [\"onUpdate:modelValue\", \"onInput\", \"placeholder\"];\nconst _hoisted_12 = {\n  class: \"ingredient-selection\"\n};\nconst _hoisted_13 = /*#__PURE__*/_createElementVNode(\"h2\", null, \"能源類\", -1 /* HOISTED */);\nconst _hoisted_14 = [\"onUpdate:modelValue\", \"onChange\"];\nconst _hoisted_15 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"\"\n}, \"選擇種類\", -1 /* HOISTED */);\nconst _hoisted_16 = [\"value\"];\nconst _hoisted_17 = [\"onUpdate:modelValue\", \"onChange\"];\nconst _hoisted_18 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"\"\n}, \"選擇名稱\", -1 /* HOISTED */);\nconst _hoisted_19 = [\"value\"];\nconst _hoisted_20 = [\"onUpdate:modelValue\", \"onInput\", \"placeholder\"];\nconst _hoisted_21 = {\n  class: \"ingredient-selection\"\n};\nconst _hoisted_22 = /*#__PURE__*/_createElementVNode(\"h2\", null, \"運輸類\", -1 /* HOISTED */);\nconst _hoisted_23 = [\"onUpdate:modelValue\", \"onChange\"];\nconst _hoisted_24 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"\"\n}, \"選擇種類\", -1 /* HOISTED */);\nconst _hoisted_25 = [\"value\"];\nconst _hoisted_26 = [\"onUpdate:modelValue\", \"onChange\"];\nconst _hoisted_27 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"\"\n}, \"選擇名稱\", -1 /* HOISTED */);\nconst _hoisted_28 = [\"value\"];\nconst _hoisted_29 = [\"onUpdate:modelValue\", \"onInput\", \"placeholder\"];\nconst _hoisted_30 = {\n  class: \"button-group\"\n};\nconst _hoisted_31 = {\n  class: \"results\"\n};\nconst _hoisted_32 = /*#__PURE__*/_createElementVNode(\"h2\", null, \"總碳排放量\", -1 /* HOISTED */);\nconst _hoisted_33 = {\n  id: \"total-emission\"\n};\nconst _hoisted_34 = {\n  class: \"comparison\"\n};\nconst _hoisted_35 = {\n  id: \"trees-saved\"\n};\nconst _hoisted_36 = /*#__PURE__*/_createElementVNode(\"footer\", null, [/*#__PURE__*/_createElementVNode(\"p\", null, \"© 2024 餐點碳排放計算機 | 聯絡我們：(089)326141~326146\")], -1 /* HOISTED */);\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" Header \"), _hoisted_2, _createCommentVNode(\" Main Content \"), _createElementVNode(\"main\", null, [_createCommentVNode(\" 食材選擇區 食材類 \"), _createElementVNode(\"section\", _hoisted_3, [_hoisted_4, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.ingredientsForFood, (ingredient, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"ingredient-row\",\n      key: index\n    }, [_withDirectives(_createElementVNode(\"select\", {\n      class: \"ingredient-category\",\n      \"onUpdate:modelValue\": $event => ingredient.category = $event,\n      onChange: $event => $setup.fetchItems(index, 'food')\n    }, [_hoisted_6, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.categories.filter(category => category.category_type === 2), category => {\n      return _openBlock(), _createElementBlock(\"option\", {\n        key: category.category_id,\n        value: category.category_id\n      }, _toDisplayString(category.category_name), 9 /* TEXT, PROPS */, _hoisted_7);\n    }), 128 /* KEYED_FRAGMENT */))], 40 /* PROPS, NEED_HYDRATION */, _hoisted_5), [[_vModelSelect, ingredient.category]]), _withDirectives(_createElementVNode(\"select\", {\n      class: \"ingredient-name\",\n      \"onUpdate:modelValue\": $event => ingredient.name = $event,\n      onChange: $event => $setup.updateCarbonEmission(index, 'food')\n    }, [_hoisted_9, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(ingredient.items, item => {\n      return _openBlock(), _createElementBlock(\"option\", {\n        key: item.item_id,\n        value: item.item_id\n      }, _toDisplayString(item.item_name), 9 /* TEXT, PROPS */, _hoisted_10);\n    }), 128 /* KEYED_FRAGMENT */))], 40 /* PROPS, NEED_HYDRATION */, _hoisted_8), [[_vModelSelect, ingredient.name]]), _withDirectives(_createElementVNode(\"input\", {\n      type: \"number\",\n      class: \"ingredient-weight\",\n      \"onUpdate:modelValue\": $event => ingredient.weight = $event,\n      onInput: $event => $setup.updateCarbonEmission(index, 'food'),\n      placeholder: ingredient.unit || '請輸入數值'\n    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_11), [[_vModelText, ingredient.weight, void 0, {\n      number: true\n    }]]), _createElementVNode(\"button\", {\n      class: \"add-row\",\n      onClick: _cache[0] || (_cache[0] = $event => $setup.addRow('food'))\n    }, \"+\")]);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createElementVNode(\"main\", null, [_createCommentVNode(\" 食材選擇區 能源類 \"), _createElementVNode(\"section\", _hoisted_12, [_hoisted_13, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.ingredientsForEnergy, (ingredient, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"ingredient-row\",\n      key: index\n    }, [_withDirectives(_createElementVNode(\"select\", {\n      class: \"ingredient-category\",\n      \"onUpdate:modelValue\": $event => ingredient.category = $event,\n      onChange: $event => $setup.fetchItems(index, 'energy')\n    }, [_hoisted_15, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.categories.filter(category => category.category_type === 3), category => {\n      return _openBlock(), _createElementBlock(\"option\", {\n        key: category.category_id,\n        value: category.category_id\n      }, _toDisplayString(category.category_name), 9 /* TEXT, PROPS */, _hoisted_16);\n    }), 128 /* KEYED_FRAGMENT */))], 40 /* PROPS, NEED_HYDRATION */, _hoisted_14), [[_vModelSelect, ingredient.category]]), _withDirectives(_createElementVNode(\"select\", {\n      class: \"ingredient-name\",\n      \"onUpdate:modelValue\": $event => ingredient.name = $event,\n      onChange: $event => $setup.updateCarbonEmission(index, 'energy')\n    }, [_hoisted_18, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(ingredient.items, item => {\n      return _openBlock(), _createElementBlock(\"option\", {\n        key: item.item_id,\n        value: item.item_id\n      }, _toDisplayString(item.item_name), 9 /* TEXT, PROPS */, _hoisted_19);\n    }), 128 /* KEYED_FRAGMENT */))], 40 /* PROPS, NEED_HYDRATION */, _hoisted_17), [[_vModelSelect, ingredient.name]]), _withDirectives(_createElementVNode(\"input\", {\n      type: \"number\",\n      class: \"ingredient-weight\",\n      \"onUpdate:modelValue\": $event => ingredient.weight = $event,\n      onInput: $event => $setup.updateCarbonEmission(index, 'energy'),\n      placeholder: ingredient.unit || '請輸入數值'\n    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_20), [[_vModelText, ingredient.weight, void 0, {\n      number: true\n    }]]), _createElementVNode(\"button\", {\n      class: \"add-row\",\n      onClick: _cache[1] || (_cache[1] = $event => $setup.addRow('energy'))\n    }, \"+\")]);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createElementVNode(\"main\", null, [_createCommentVNode(\" 食材選擇區 運輸類 \"), _createElementVNode(\"section\", _hoisted_21, [_hoisted_22, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.ingredientsForTransport, (ingredient, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"ingredient-row\",\n      key: index\n    }, [_withDirectives(_createElementVNode(\"select\", {\n      class: \"ingredient-category\",\n      \"onUpdate:modelValue\": $event => ingredient.category = $event,\n      onChange: $event => $setup.fetchItems(index, 'transport')\n    }, [_hoisted_24, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.categories.filter(category => category.category_type === 1), category => {\n      return _openBlock(), _createElementBlock(\"option\", {\n        key: category.category_id,\n        value: category.category_id\n      }, _toDisplayString(category.category_name), 9 /* TEXT, PROPS */, _hoisted_25);\n    }), 128 /* KEYED_FRAGMENT */))], 40 /* PROPS, NEED_HYDRATION */, _hoisted_23), [[_vModelSelect, ingredient.category]]), _withDirectives(_createElementVNode(\"select\", {\n      class: \"ingredient-name\",\n      \"onUpdate:modelValue\": $event => ingredient.name = $event,\n      onChange: $event => $setup.updateCarbonEmission(index, 'transport')\n    }, [_hoisted_27, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(ingredient.items, item => {\n      return _openBlock(), _createElementBlock(\"option\", {\n        key: item.item_id,\n        value: item.item_id\n      }, _toDisplayString(item.item_name), 9 /* TEXT, PROPS */, _hoisted_28);\n    }), 128 /* KEYED_FRAGMENT */))], 40 /* PROPS, NEED_HYDRATION */, _hoisted_26), [[_vModelSelect, ingredient.name]]), _withDirectives(_createElementVNode(\"input\", {\n      type: \"number\",\n      class: \"ingredient-weight\",\n      \"onUpdate:modelValue\": $event => ingredient.weight = $event,\n      onInput: $event => $setup.updateCarbonEmission(index, 'transport'),\n      placeholder: ingredient.unit || '請輸入數值'\n    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_29), [[_vModelText, ingredient.weight, void 0, {\n      number: true\n    }]]), _createElementVNode(\"button\", {\n      class: \"add-row\",\n      onClick: _cache[2] || (_cache[2] = $event => $setup.addRow('transport'))\n    }, \"+\")]);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createElementVNode(\"main\", null, [_createCommentVNode(\" 計算按鈕 \"), _createElementVNode(\"div\", _hoisted_30, [_createElementVNode(\"button\", {\n    class: \"reset-button\",\n    onClick: _cache[3] || (_cache[3] = (...args) => $setup.resetCalculator && $setup.resetCalculator(...args))\n  }, \"重新計算\"), _createElementVNode(\"button\", {\n    class: \"calculate-button\",\n    onClick: _cache[4] || (_cache[4] = (...args) => $setup.calculateEmissions && $setup.calculateEmissions(...args))\n  }, \"計算碳排放\")]), _createCommentVNode(\" 結果顯示區 \"), _createElementVNode(\"section\", _hoisted_31, [_hoisted_32, _createElementVNode(\"p\", _hoisted_33, _toDisplayString($setup.totalEmission.toFixed(2)) + \" kg CO₂e\", 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_34, [_createElementVNode(\"p\", null, [_createElementVNode(\"span\", _hoisted_35, _toDisplayString($setup.treesSaved), 1 /* TEXT */), _createTextVNode(\" 棵樹木一個月的吸收量\")])])])]), _createCommentVNode(\" Footer \"), _hoisted_36]);\n}","map":{"version":3,"names":["id","_createStaticVNode","class","_createElementVNode","_createTextVNode","style","value","_createElementBlock","_hoisted_1","_createCommentVNode","_hoisted_2","_hoisted_3","_hoisted_4","_Fragment","_renderList","$setup","ingredientsForFood","ingredient","index","key","$event","category","onChange","fetchItems","_hoisted_6","categories","filter","category_type","category_id","category_name","_hoisted_7","_hoisted_5","name","updateCarbonEmission","_hoisted_9","items","item","item_id","item_name","_hoisted_10","_hoisted_8","type","weight","onInput","placeholder","unit","_hoisted_11","number","onClick","_cache","addRow","_hoisted_12","_hoisted_13","ingredientsForEnergy","_hoisted_15","_hoisted_16","_hoisted_14","_hoisted_18","_hoisted_19","_hoisted_17","_hoisted_20","_hoisted_21","_hoisted_22","ingredientsForTransport","_hoisted_24","_hoisted_25","_hoisted_23","_hoisted_27","_hoisted_28","_hoisted_26","_hoisted_29","_hoisted_30","args","resetCalculator","calculateEmissions","_hoisted_31","_hoisted_32","_hoisted_33","_toDisplayString","totalEmission","toFixed","_hoisted_34","_hoisted_35","treesSaved","_hoisted_36"],"sources":["C:\\Users\\user\\carbon-calculator\\src\\App.vue"],"sourcesContent":["<template>\r\n  <div id=\"app\">\r\n    <!-- Header -->\r\n    <header>\r\n    <nav class=\"navbar fixed-top navbar-expand-lg navbar-dark \" style=\"background-color:  #6abf69;\">\r\n      <div class=\"container-fluid\">\r\n        <a class=\"navbar-brand\" href=\"index.html\">台東減碳x慢食遊</a>\r\n        <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\" aria-controls=\"navbarNav\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n          <span class=\"navbar-toggler-icon\"></span>\r\n        </button>\r\n        <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n          <ul class=\"navbar-nav\">\r\n           \r\n            <li class=\"nav-item\">\r\n              <a class=\"nav-link\" href=\"#\">碳排計算機</a>\r\n            </li>\r\n            <li class=\"nav-item\">\r\n              <a class=\"nav-link \"   href=\"slowfood_info.html\">慢食趣</a>\r\n            </li>\r\n            <li class=\"nav-item\">\r\n              <a class=\"nav-link active\" aria-current=\"page\" href=\"carbon_info.html\">減碳資訊及平台介紹</a>\r\n            </li>\r\n            <li class=\"nav-item\">\r\n                <a class=\"nav-link \" href=\"restaurent_info.html\">餐廳介紹</a>\r\n              </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n    </header>\r\n    <!-- Main Content -->\r\n    <main>\r\n      <!-- 食材選擇區 食材類 -->\r\n      <section class=\"ingredient-selection\">\r\n        <h2>食材類\r\n          <small style=\"font-size: 0.4em; color: gray; margin-left: 4px;\">(按 + 可新增)</small>\r\n        </h2>\r\n        <div class=\"ingredient-row\" v-for=\"(ingredient, index) in ingredientsForFood\" :key=\"index\">\r\n          <select class=\"ingredient-category\" v-model=\"ingredient.category\" @change=\"fetchItems(index, 'food')\">\r\n            <option value=\"\">選擇種類</option>\r\n            <option v-for=\"category in categories.filter(category => category.category_type === 2)\" :key=\"category.category_id\" :value=\"category.category_id\">\r\n              {{ category.category_name }}\r\n            </option>\r\n          </select>\r\n          <select class=\"ingredient-name\" v-model=\"ingredient.name\" @change=\"updateCarbonEmission(index, 'food')\">\r\n            <option value=\"\">選擇名稱</option>\r\n            <option v-for=\"item in ingredient.items\" :key=\"item.item_id\" :value=\"item.item_id\">\r\n              {{ item.item_name }}\r\n            </option>\r\n          </select>\r\n          <input type=\"number\" class=\"ingredient-weight\" v-model.number=\"ingredient.weight\" @input=\"updateCarbonEmission(index, 'food')\" :placeholder=\"ingredient.unit || '請輸入數值'\">\r\n          <button class=\"add-row\" @click=\"addRow('food')\">+</button>\r\n        </div>\r\n      </section>\r\n    </main>\r\n\r\n    <main>\r\n      <!-- 食材選擇區 能源類 -->\r\n      <section class=\"ingredient-selection\">\r\n        <h2>能源類</h2>\r\n        <div class=\"ingredient-row\" v-for=\"(ingredient, index) in ingredientsForEnergy\" :key=\"index\">\r\n          <select class=\"ingredient-category\" v-model=\"ingredient.category\" @change=\"fetchItems(index, 'energy')\">\r\n            <option value=\"\">選擇種類</option>\r\n            <option v-for=\"category in categories.filter(category => category.category_type === 3)\" :key=\"category.category_id\" :value=\"category.category_id\">\r\n              {{ category.category_name }}\r\n            </option>\r\n          </select>\r\n          <select class=\"ingredient-name\" v-model=\"ingredient.name\" @change=\"updateCarbonEmission(index, 'energy')\">\r\n            <option value=\"\">選擇名稱</option>\r\n            <option v-for=\"item in ingredient.items\" :key=\"item.item_id\" :value=\"item.item_id\">\r\n              {{ item.item_name }}\r\n            </option>\r\n          </select>\r\n          <input type=\"number\" class=\"ingredient-weight\" v-model.number=\"ingredient.weight\" @input=\"updateCarbonEmission(index, 'energy')\" :placeholder=\"ingredient.unit || '請輸入數值'\">\r\n          <button class=\"add-row\" @click=\"addRow('energy')\">+</button>\r\n        </div>\r\n      </section>\r\n    </main>\r\n\r\n    <main>\r\n      <!-- 食材選擇區 運輸類 -->\r\n      <section class=\"ingredient-selection\">\r\n        <h2>運輸類</h2>\r\n        <div class=\"ingredient-row\" v-for=\"(ingredient, index) in ingredientsForTransport\" :key=\"index\">\r\n          <select class=\"ingredient-category\" v-model=\"ingredient.category\" @change=\"fetchItems(index, 'transport')\">\r\n            <option value=\"\">選擇種類</option>\r\n            <option v-for=\"category in categories.filter(category => category.category_type === 1)\" :key=\"category.category_id\" :value=\"category.category_id\">\r\n              {{ category.category_name }}\r\n            </option>\r\n          </select>\r\n          <select class=\"ingredient-name\" v-model=\"ingredient.name\" @change=\"updateCarbonEmission(index, 'transport')\">\r\n            <option value=\"\">選擇名稱</option>\r\n            <option v-for=\"item in ingredient.items\" :key=\"item.item_id\" :value=\"item.item_id\">\r\n              {{ item.item_name }}\r\n            </option>\r\n          </select>\r\n          <input type=\"number\" class=\"ingredient-weight\" v-model.number=\"ingredient.weight\" @input=\"updateCarbonEmission(index, 'transport')\" :placeholder=\"ingredient.unit || '請輸入數值'\">\r\n          <button class=\"add-row\" @click=\"addRow('transport')\">+</button>\r\n        </div>\r\n      </section>\r\n    </main>\r\n\r\n\r\n    <main>\r\n      <!-- 計算按鈕 -->\r\n      <div class=\"button-group\">\r\n        <button class=\"reset-button\" @click=\"resetCalculator\">重新計算</button>\r\n\r\n        <button class=\"calculate-button\" @click=\"calculateEmissions\">計算碳排放</button>\r\n        \r\n      </div>\r\n      <!-- 結果顯示區 -->\r\n      <section class=\"results\">\r\n        <h2>總碳排放量</h2>\r\n        <p id=\"total-emission\">{{ totalEmission.toFixed(2) }} kg CO₂e</p>\r\n        <div class=\"comparison\">\r\n          <p><span id=\"trees-saved\">{{ treesSaved }}</span> 棵樹木一個月的吸收量</p>\r\n        </div>\r\n      </section>\r\n    </main>\r\n\r\n    <!-- Footer -->\r\n    <footer>\r\n      <p>© 2024 餐點碳排放計算機 | 聯絡我們：(089)326141~326146</p>\r\n    </footer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from 'vue';\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  setup() {\r\n    const categories = ref([]);\r\n    const ingredientsForFood = ref([\r\n      { category: '', name: '', weight: '', items: [], carbon_emission: 0 }\r\n    ]);\r\n    const ingredientsForEnergy = ref([\r\n      { category: '', name: '', weight: '', items: [], carbon_emission: 0 }\r\n    ]);\r\n    const ingredientsForTransport = ref([\r\n      { category: '', name: '', weight: '', items: [], carbon_emission: 0 }\r\n    ]);\r\n    const totalEmission = ref(0.00);\r\n    const carTravel = ref(0);\r\n    const treesSaved = ref(0);\r\n\r\n    const fetchCategories = () => {\r\n      axios.get('http://localhost:3001/api/categories')\r\n        .then(response => {\r\n          categories.value = response.data;\r\n        })\r\n        .catch(error => {\r\n          console.error('There was an error fetching categories!', error);\r\n        });\r\n    };\r\n\r\n    const fetchItems = (index, type) => {\r\n      let ingredientsArray;\r\n      if (type === 'food') {\r\n        ingredientsArray = ingredientsForFood;\r\n      } else if (type === 'energy') {\r\n        ingredientsArray = ingredientsForEnergy;\r\n      } else if (type === 'transport') {\r\n        ingredientsArray = ingredientsForTransport;\r\n      }\r\n\r\n      const category_id = ingredientsArray.value[index].category;\r\n      if (category_id) {\r\n        axios.get(`http://localhost:3001/api/items/${category_id}`)\r\n          .then(response => {\r\n            ingredientsArray.value[index].items = response.data;\r\n            ingredientsArray.value[index].name = ''; // 重置选择的食材名称\r\n          })\r\n          .catch(error => {\r\n            console.error('There was an error fetching items!', error);\r\n          });\r\n      }\r\n    };\r\n\r\n    const updateCarbonEmission = (index, type) => {\r\n      let ingredientsArray;\r\n      if (type === 'food') {\r\n        ingredientsArray = ingredientsForFood;\r\n      } else if (type === 'energy') {\r\n        ingredientsArray = ingredientsForEnergy;\r\n      } else if (type === 'transport') {\r\n        ingredientsArray = ingredientsForTransport;\r\n      }\r\n\r\n      const ingredient = ingredientsArray.value[index];\r\n      if (ingredient.weight < 0) {\r\n        alert('重量不可为负值！');\r\n        ingredient.weight = 0;\r\n      }\r\n      const selectedItem = ingredient.items.find(item => item.item_id === ingredient.name);\r\n      if (selectedItem) {\r\n        ingredient.carbon_emission = selectedItem.carbon_emission * ingredient.weight;\r\n        ingredient.unit = selectedItem.unit || '';\r\n      } else {\r\n        ingredient.carbon_emission = 0;\r\n        ingredient.unit = '';\r\n      }\r\n    };\r\n\r\n    const addRow = (type) => {\r\n      const newIngredient = { category: '', name: '', weight: '', items: [], carbon_emission: 0 };\r\n      if (type === 'food') {\r\n        ingredientsForFood.value.push(newIngredient);\r\n      } else if (type === 'energy') {\r\n        ingredientsForEnergy.value.push(newIngredient);\r\n      } else if (type === 'transport') {\r\n        ingredientsForTransport.value.push(newIngredient);\r\n      }\r\n    };\r\n\r\n    const calculateEmissions = () => {\r\n      totalEmission.value = [...ingredientsForFood.value, ...ingredientsForEnergy.value, ...ingredientsForTransport.value]\r\n        .reduce((total, ingredient) => total + ingredient.carbon_emission, 0);\r\n      carTravel.value = totalEmission.value * 5; // 假设1kg CO2等于行驶5公里\r\n      treesSaved.value = (totalEmission.value / 0.625).toFixed(1); // 假设1kg CO2等于10棵树一个月的吸收量\r\n    };\r\n\r\n    const resetCalculator = () => {\r\n      ingredientsForFood.value = [{ category: '', name: '', weight: '', items: [], carbon_emission: 0 }];\r\n      ingredientsForEnergy.value = [{ category: '', name: '', weight: '', items: [], carbon_emission: 0 }];\r\n      ingredientsForTransport.value = [{ category: '', name: '', weight: '', items: [], carbon_emission: 0 }];\r\n      totalEmission.value = 0.00;\r\n      carTravel.value = 0;\r\n      treesSaved.value = 0;\r\n    };\r\n\r\n    fetchCategories(); // 初始化时获取分类数据\r\n\r\n    return {\r\n      categories,\r\n      ingredientsForFood,\r\n      ingredientsForEnergy,\r\n      ingredientsForTransport,\r\n      totalEmission,\r\n      carTravel,\r\n      treesSaved,\r\n      fetchItems,\r\n      updateCarbonEmission,\r\n      addRow,\r\n      calculateEmissions,\r\n      resetCalculator\r\n    };\r\n  }\r\n}\r\n</script>\r\n\r\n\r\n<style src=\"./assets/style.css\"></style>"],"mappings":";;EACOA,EAAE,EAAC;AAAK;gCADfC,kBAAA;;EAiCeC,KAAK,EAAC;AAAsB;gCACnCC,mBAAA,CAEK,a,aApCbC,gBAAA,CAkCY,MACF,G,aAAAD,mBAAA,CAAiF;EAA1EE,KAAwD,EAAxD;IAAA;IAAA;IAAA;EAAA;AAAwD,GAAC,WAAS,E;mBAnCnF;gCAuCYF,mBAAA,CAA8B;EAAtBG,KAAK,EAAC;AAAE,GAAC,MAAI;mBAvCjC;mBAAA;gCA6CYH,mBAAA,CAA8B;EAAtBG,KAAK,EAAC;AAAE,GAAC,MAAI;oBA7CjC;oBAAA;;EA0DeJ,KAAK,EAAC;AAAsB;iCACnCC,mBAAA,CAAY,YAAR,KAAG;oBA3Df;iCA8DYA,mBAAA,CAA8B;EAAtBG,KAAK,EAAC;AAAE,GAAC,MAAI;oBA9DjC;oBAAA;iCAoEYH,mBAAA,CAA8B;EAAtBG,KAAK,EAAC;AAAE,GAAC,MAAI;oBApEjC;oBAAA;;EAiFeJ,KAAK,EAAC;AAAsB;iCACnCC,mBAAA,CAAY,YAAR,KAAG;oBAlFf;iCAqFYA,mBAAA,CAA8B;EAAtBG,KAAK,EAAC;AAAE,GAAC,MAAI;oBArFjC;oBAAA;iCA2FYH,mBAAA,CAA8B;EAAtBG,KAAK,EAAC;AAAE,GAAC,MAAI;oBA3FjC;oBAAA;;EAyGWJ,KAAK,EAAC;AAAc;;EAOhBA,KAAK,EAAC;AAAS;iCACtBC,mBAAA,CAAc,YAAV,OAAK;;EACNH,EAAE,EAAC;AAAgB;;EACjBE,KAAK,EAAC;AAAY;;EACZF,EAAE,EAAC;AAAa;iCAM/BG,mBAAA,CAES,iB,aADPA,mBAAA,CAAgD,WAA7C,2CAAyC,E;;uBA1HhDI,mBAAA,CA4HM,OA5HNC,UA4HM,GA3HJC,mBAAA,YAAe,EACfC,UA0BS,EACTD,mBAAA,kBAAqB,EACrBN,mBAAA,CAuBO,eAtBLM,mBAAA,eAAkB,EAClBN,mBAAA,CAoBU,WApBVQ,UAoBU,GAnBRC,UAEK,G,kBACLL,mBAAA,CAeMM,SAAA,QApDdC,WAAA,CAqCkEC,MAAA,CAAAC,kBAAkB,EArCpF,CAqC4CC,UAAU,EAAEC,KAAK;yBAArDX,mBAAA,CAeM;MAfDL,KAAK,EAAC,gBAAgB;MAAoDiB,GAAG,EAAED;wBAClFf,mBAAA,CAKS;MALDD,KAAK,EAAC,qBAAqB;MAtC7C,uBAAAkB,MAAA,IAsCuDH,UAAU,CAACI,QAAQ,GAAAD,MAAA;MAAGE,QAAM,EAAAF,MAAA,IAAEL,MAAA,CAAAQ,UAAU,CAACL,KAAK;QACzFM,UAA8B,G,kBAC9BjB,mBAAA,CAESM,SAAA,QA1CrBC,WAAA,CAwCuCC,MAAA,CAAAU,UAAU,CAACC,MAAM,CAACL,QAAQ,IAAIA,QAAQ,CAACM,aAAa,SAAhEN,QAAQ;2BAAvBd,mBAAA,CAES;QAFgFY,GAAG,EAAEE,QAAQ,CAACO,WAAW;QAAGtB,KAAK,EAAEe,QAAQ,CAACO;0BAChIP,QAAQ,CAACQ,aAAa,wBAzCvCC,UAAA;qEAAAC,UAAA,I,gBAsCuDd,UAAU,CAACI,QAAQ,E,mBAMhElB,mBAAA,CAKS;MALDD,KAAK,EAAC,iBAAiB;MA5CzC,uBAAAkB,MAAA,IA4CmDH,UAAU,CAACe,IAAI,GAAAZ,MAAA;MAAGE,QAAM,EAAAF,MAAA,IAAEL,MAAA,CAAAkB,oBAAoB,CAACf,KAAK;QAC3FgB,UAA8B,G,kBAC9B3B,mBAAA,CAESM,SAAA,QAhDrBC,WAAA,CA8CmCG,UAAU,CAACkB,KAAK,EAAxBC,IAAI;2BAAnB7B,mBAAA,CAES;QAFiCY,GAAG,EAAEiB,IAAI,CAACC,OAAO;QAAG/B,KAAK,EAAE8B,IAAI,CAACC;0BACrED,IAAI,CAACE,SAAS,wBA/C/BC,WAAA;qEAAAC,UAAA,I,gBA4CmDvB,UAAU,CAACe,IAAI,E,mBAMxD7B,mBAAA,CAAyK;MAAlKsC,IAAI,EAAC,QAAQ;MAACvC,KAAK,EAAC,mBAAmB;MAlDxD,uBAAAkB,MAAA,IAkDyEH,UAAU,CAACyB,MAAM,GAAAtB,MAAA;MAAGuB,OAAK,EAAAvB,MAAA,IAAEL,MAAA,CAAAkB,oBAAoB,CAACf,KAAK;MAAY0B,WAAW,EAAE3B,UAAU,CAAC4B,IAAI;6CAlDtKC,WAAA,I,cAkDyE7B,UAAU,CAACyB,MAAM,E;MAlD1FK,MAAA,EAkDyD;IAAkC,E,IACjF5C,mBAAA,CAA0D;MAAlDD,KAAK,EAAC,SAAS;MAAE8C,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAA7B,MAAA,IAAEL,MAAA,CAAAmC,MAAM;OAAU,GAAC,E;sCAKvD/C,mBAAA,CAqBO,eApBLM,mBAAA,eAAkB,EAClBN,mBAAA,CAkBU,WAlBVgD,WAkBU,GAjBRC,WAAY,G,kBACZ7C,mBAAA,CAeMM,SAAA,QA3EdC,WAAA,CA4DkEC,MAAA,CAAAsC,oBAAoB,EA5DtF,CA4D4CpC,UAAU,EAAEC,KAAK;yBAArDX,mBAAA,CAeM;MAfDL,KAAK,EAAC,gBAAgB;MAAsDiB,GAAG,EAAED;wBACpFf,mBAAA,CAKS;MALDD,KAAK,EAAC,qBAAqB;MA7D7C,uBAAAkB,MAAA,IA6DuDH,UAAU,CAACI,QAAQ,GAAAD,MAAA;MAAGE,QAAM,EAAAF,MAAA,IAAEL,MAAA,CAAAQ,UAAU,CAACL,KAAK;QACzFoC,WAA8B,G,kBAC9B/C,mBAAA,CAESM,SAAA,QAjErBC,WAAA,CA+DuCC,MAAA,CAAAU,UAAU,CAACC,MAAM,CAACL,QAAQ,IAAIA,QAAQ,CAACM,aAAa,SAAhEN,QAAQ;2BAAvBd,mBAAA,CAES;QAFgFY,GAAG,EAAEE,QAAQ,CAACO,WAAW;QAAGtB,KAAK,EAAEe,QAAQ,CAACO;0BAChIP,QAAQ,CAACQ,aAAa,wBAhEvC0B,WAAA;qEAAAC,WAAA,I,gBA6DuDvC,UAAU,CAACI,QAAQ,E,mBAMhElB,mBAAA,CAKS;MALDD,KAAK,EAAC,iBAAiB;MAnEzC,uBAAAkB,MAAA,IAmEmDH,UAAU,CAACe,IAAI,GAAAZ,MAAA;MAAGE,QAAM,EAAAF,MAAA,IAAEL,MAAA,CAAAkB,oBAAoB,CAACf,KAAK;QAC3FuC,WAA8B,G,kBAC9BlD,mBAAA,CAESM,SAAA,QAvErBC,WAAA,CAqEmCG,UAAU,CAACkB,KAAK,EAAxBC,IAAI;2BAAnB7B,mBAAA,CAES;QAFiCY,GAAG,EAAEiB,IAAI,CAACC,OAAO;QAAG/B,KAAK,EAAE8B,IAAI,CAACC;0BACrED,IAAI,CAACE,SAAS,wBAtE/BoB,WAAA;qEAAAC,WAAA,I,gBAmEmD1C,UAAU,CAACe,IAAI,E,mBAMxD7B,mBAAA,CAA2K;MAApKsC,IAAI,EAAC,QAAQ;MAACvC,KAAK,EAAC,mBAAmB;MAzExD,uBAAAkB,MAAA,IAyEyEH,UAAU,CAACyB,MAAM,GAAAtB,MAAA;MAAGuB,OAAK,EAAAvB,MAAA,IAAEL,MAAA,CAAAkB,oBAAoB,CAACf,KAAK;MAAc0B,WAAW,EAAE3B,UAAU,CAAC4B,IAAI;6CAzExKe,WAAA,I,cAyEyE3C,UAAU,CAACyB,MAAM,E;MAzE1FK,MAAA,EAyEyD;IAAkC,E,IACjF5C,mBAAA,CAA4D;MAApDD,KAAK,EAAC,SAAS;MAAE8C,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAA7B,MAAA,IAAEL,MAAA,CAAAmC,MAAM;OAAY,GAAC,E;sCAKzD/C,mBAAA,CAqBO,eApBLM,mBAAA,eAAkB,EAClBN,mBAAA,CAkBU,WAlBV0D,WAkBU,GAjBRC,WAAY,G,kBACZvD,mBAAA,CAeMM,SAAA,QAlGdC,WAAA,CAmFkEC,MAAA,CAAAgD,uBAAuB,EAnFzF,CAmF4C9C,UAAU,EAAEC,KAAK;yBAArDX,mBAAA,CAeM;MAfDL,KAAK,EAAC,gBAAgB;MAAyDiB,GAAG,EAAED;wBACvFf,mBAAA,CAKS;MALDD,KAAK,EAAC,qBAAqB;MApF7C,uBAAAkB,MAAA,IAoFuDH,UAAU,CAACI,QAAQ,GAAAD,MAAA;MAAGE,QAAM,EAAAF,MAAA,IAAEL,MAAA,CAAAQ,UAAU,CAACL,KAAK;QACzF8C,WAA8B,G,kBAC9BzD,mBAAA,CAESM,SAAA,QAxFrBC,WAAA,CAsFuCC,MAAA,CAAAU,UAAU,CAACC,MAAM,CAACL,QAAQ,IAAIA,QAAQ,CAACM,aAAa,SAAhEN,QAAQ;2BAAvBd,mBAAA,CAES;QAFgFY,GAAG,EAAEE,QAAQ,CAACO,WAAW;QAAGtB,KAAK,EAAEe,QAAQ,CAACO;0BAChIP,QAAQ,CAACQ,aAAa,wBAvFvCoC,WAAA;qEAAAC,WAAA,I,gBAoFuDjD,UAAU,CAACI,QAAQ,E,mBAMhElB,mBAAA,CAKS;MALDD,KAAK,EAAC,iBAAiB;MA1FzC,uBAAAkB,MAAA,IA0FmDH,UAAU,CAACe,IAAI,GAAAZ,MAAA;MAAGE,QAAM,EAAAF,MAAA,IAAEL,MAAA,CAAAkB,oBAAoB,CAACf,KAAK;QAC3FiD,WAA8B,G,kBAC9B5D,mBAAA,CAESM,SAAA,QA9FrBC,WAAA,CA4FmCG,UAAU,CAACkB,KAAK,EAAxBC,IAAI;2BAAnB7B,mBAAA,CAES;QAFiCY,GAAG,EAAEiB,IAAI,CAACC,OAAO;QAAG/B,KAAK,EAAE8B,IAAI,CAACC;0BACrED,IAAI,CAACE,SAAS,wBA7F/B8B,WAAA;qEAAAC,WAAA,I,gBA0FmDpD,UAAU,CAACe,IAAI,E,mBAMxD7B,mBAAA,CAA8K;MAAvKsC,IAAI,EAAC,QAAQ;MAACvC,KAAK,EAAC,mBAAmB;MAhGxD,uBAAAkB,MAAA,IAgGyEH,UAAU,CAACyB,MAAM,GAAAtB,MAAA;MAAGuB,OAAK,EAAAvB,MAAA,IAAEL,MAAA,CAAAkB,oBAAoB,CAACf,KAAK;MAAiB0B,WAAW,EAAE3B,UAAU,CAAC4B,IAAI;6CAhG3KyB,WAAA,I,cAgGyErD,UAAU,CAACyB,MAAM,E;MAhG1FK,MAAA,EAgGyD;IAAkC,E,IACjF5C,mBAAA,CAA+D;MAAvDD,KAAK,EAAC,SAAS;MAAE8C,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAA7B,MAAA,IAAEL,MAAA,CAAAmC,MAAM;OAAe,GAAC,E;sCAM5D/C,mBAAA,CAgBO,eAfLM,mBAAA,UAAa,EACbN,mBAAA,CAKM,OALNoE,WAKM,GAJJpE,mBAAA,CAAmE;IAA3DD,KAAK,EAAC,cAAc;IAAE8C,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAuB,IAAA,KAAEzD,MAAA,CAAA0D,eAAA,IAAA1D,MAAA,CAAA0D,eAAA,IAAAD,IAAA,CAAe;KAAE,MAAI,GAE1DrE,mBAAA,CAA2E;IAAnED,KAAK,EAAC,kBAAkB;IAAE8C,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAuB,IAAA,KAAEzD,MAAA,CAAA2D,kBAAA,IAAA3D,MAAA,CAAA2D,kBAAA,IAAAF,IAAA,CAAkB;KAAE,OAAK,E,GAGpE/D,mBAAA,WAAc,EACdN,mBAAA,CAMU,WANVwE,WAMU,GALRC,WAAc,EACdzE,mBAAA,CAAiE,KAAjE0E,WAAiE,EAAAC,gBAAA,CAAvC/D,MAAA,CAAAgE,aAAa,CAACC,OAAO,OAAM,UAAQ,iBAC7D7E,mBAAA,CAEM,OAFN8E,WAEM,GADJ9E,mBAAA,CAAgE,YAA7DA,mBAAA,CAA8C,QAA9C+E,WAA8C,EAAAJ,gBAAA,CAApB/D,MAAA,CAAAoE,UAAU,kBApHjD/E,gBAAA,CAoH2D,aAAW,E,SAKlEK,mBAAA,YAAe,EACf2E,WAES,C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}