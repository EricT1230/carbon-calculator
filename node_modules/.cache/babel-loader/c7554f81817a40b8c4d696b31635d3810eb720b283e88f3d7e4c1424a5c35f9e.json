{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, nextTick, computed } from 'vue';\nimport axios from 'axios';\nimport { Chart, registerables } from 'chart.js';\nimport 'bootstrap/dist/js/bootstrap.bundle.min.js';\nChart.register(...registerables);\nexport default {\n  setup() {\n    const categories = ref([]);\n    const energyCategoryId = '7';\n    const transportCategoryId = '1';\n    const ingredientsForFood = ref([{\n      category: '',\n      name: '',\n      weight: '',\n      items: [],\n      carbon_emission: 0\n    }]);\n    const ingredientsForEnergy = ref([{\n      category: energyCategoryId,\n      name: '',\n      weight: '',\n      items: [],\n      carbon_emission: 0\n    }]);\n    const ingredientsForTransport = ref([{\n      category: transportCategoryId,\n      name: '',\n      weight: '',\n      items: [],\n      carbon_emission: 0\n    }]);\n    const totalEmission = ref(0.00);\n    const carTravel = ref(0);\n    const treesSaved = ref(0);\n    const chartInstance = ref(null); // Chart.js\n\n    const fetchCategories = () => {\n      axios.get('http://localhost:3001/api/categories').then(response => {\n        categories.value = response.data;\n\n        // 設置能源類的預選項\n        const energyCategory = categories.value.find(cat => cat.category_name === '烹煮能源類');\n        if (energyCategory) {\n          ingredientsForEnergy.value[0].category = energyCategory.category_id;\n          fetchItems(0, 'energy'); // 請求該類別的項目\n        }\n\n        // 設置運輸類的預選項\n        const transportCategory = categories.value.find(cat => cat.category_name === '運輸類');\n        if (transportCategory) {\n          ingredientsForTransport.value[0].category = transportCategory.category_id;\n          fetchItems(0, 'transport'); // 請求該類別的項目\n        }\n      }).catch(error => {\n        console.error('There was an error fetching categories!', error);\n      });\n    };\n    const fetchItems = (index, type) => {\n      let ingredientsArray;\n      if (type === 'food') {\n        ingredientsArray = ingredientsForFood;\n      } else if (type === 'energy') {\n        ingredientsArray = ingredientsForEnergy;\n      } else if (type === 'transport') {\n        ingredientsArray = ingredientsForTransport;\n      }\n      const category_id = ingredientsArray.value[index].category;\n      if (category_id) {\n        axios.get(`http://localhost:3001/api/items/${category_id}`).then(response => {\n          ingredientsArray.value[index].items = response.data;\n          ingredientsArray.value[index].name = ''; // 重製食材\n        }).catch(error => {\n          console.error('There was an error fetching items!', error);\n        });\n      }\n    };\n    fetchCategories(); // 在頁面加載時調用\n\n    const updateCarbonEmission = (index, type) => {\n      let ingredientsArray;\n      if (type === 'food') {\n        ingredientsArray = ingredientsForFood;\n      } else if (type === 'energy') {\n        ingredientsArray = ingredientsForEnergy;\n      } else if (type === 'transport') {\n        ingredientsArray = ingredientsForTransport;\n      }\n      const ingredient = ingredientsArray.value[index];\n      if (ingredient.weight < 0) {\n        alert('重量不可為負值！');\n        ingredient.weight = 0;\n      }\n      const selectedItem = ingredient.items.find(item => item.item_id === ingredient.name);\n      if (selectedItem) {\n        ingredient.carbon_emission = selectedItem.carbon_emission * ingredient.weight;\n        ingredient.unit = selectedItem.unit || '';\n      } else {\n        ingredient.carbon_emission = 0;\n        ingredient.unit = '';\n      }\n    };\n    const addRow = type => {\n      let newIngredient = null;\n      if (type === 'food') {\n        newIngredient = {\n          category: '',\n          name: '',\n          weight: '',\n          items: [],\n          carbon_emission: 0\n        };\n        ingredientsForFood.value.push(newIngredient);\n        fetchItems(ingredientsForFood.value.length - 1, 'food');\n      } else if (type === 'energy') {\n        newIngredient = {\n          category: '7',\n          name: '',\n          weight: '',\n          items: [],\n          carbon_emission: 0\n        };\n        ingredientsForEnergy.value.push(newIngredient);\n        fetchItems(ingredientsForEnergy.value.length - 1, 'energy');\n      } else if (type === 'transport') {\n        newIngredient = {\n          category: '1',\n          name: '',\n          weight: '',\n          items: [],\n          carbon_emission: 0\n        };\n        ingredientsForTransport.value.push(newIngredient);\n        fetchItems(ingredientsForTransport.value.length - 1, 'transport');\n      }\n    };\n    const detailedData = ref([]);\n    const foodData = computed(() => detailedData.value.filter(item => item.category === '食材類'));\n    const energyData = computed(() => detailedData.value.filter(item => item.category === '能源類'));\n    const transportData = computed(() => detailedData.value.filter(item => item.category === '運輸類'));\n    const calculateEmissions = () => {\n      const foodEmission = ingredientsForFood.value.reduce((total, ingredient) => total + ingredient.carbon_emission, 0);\n      const energyEmission = ingredientsForEnergy.value.reduce((total, ingredient) => total + ingredient.carbon_emission, 0);\n      const transportEmission = ingredientsForTransport.value.reduce((total, ingredient) => total + ingredient.carbon_emission, 0);\n      totalEmission.value = foodEmission + energyEmission + transportEmission;\n      carTravel.value = totalEmission.value * 5; // 假設1kg CO2等於行駛5公里\n      treesSaved.value = (totalEmission.value / 0.625).toFixed(1); // 假設1kg CO2等於10棵樹一個月的吸收量\n\n      detailedData.value = [...ingredientsForFood.value.map(ingredient => ({\n        category: '食材類',\n        item_name: ingredient.items.find(item => item.item_id === ingredient.name)?.item_name || '',\n        input_value: ingredient.weight,\n        carbon_emission: ingredient.carbon_emission,\n        source: ingredient.items.find(item => item.item_id === ingredient.name)?.source || '未知來源',\n        level: ingredient.items.find(item => item.item_id === ingredient.name)?.level || '未知'\n      })), ...ingredientsForEnergy.value.map(ingredient => ({\n        category: '能源類',\n        item_name: ingredient.items.find(item => item.item_id === ingredient.name)?.item_name || '',\n        input_value: ingredient.weight,\n        carbon_emission: ingredient.carbon_emission,\n        source: ingredient.items.find(item => item.item_id === ingredient.name)?.source || '未知來源',\n        level: ingredient.items.find(item => item.item_id === ingredient.name)?.level || '未知'\n      })), ...ingredientsForTransport.value.map(ingredient => ({\n        category: '運輸類',\n        item_name: ingredient.items.find(item => item.item_id === ingredient.name)?.item_name || '',\n        input_value: ingredient.weight,\n        carbon_emission: ingredient.carbon_emission,\n        source: ingredient.items.find(item => item.item_id === ingredient.name)?.source || '未知來源',\n        level: ingredient.items.find(item => item.item_id === ingredient.name)?.level || '未知'\n      }))];\n\n      // 只有當有碳排放量時才更新圖表並顯示\n      if (totalEmission.value > 0) {\n        nextTick(() => {\n          updateChart(foodEmission, energyEmission, transportEmission);\n        });\n      }\n    };\n    const updateChart = (foodEmission, energyEmission, transportEmission) => {\n      const ctx = document.getElementById('emissionChart')?.getContext('2d');\n      if (!ctx) {\n        console.error(\"Canvas element not found\");\n        return;\n      }\n      if (chartInstance.value) {\n        chartInstance.value.destroy(); // 如果圖表存在，就刪除\n      }\n      chartInstance.value = new Chart(ctx, {\n        type: 'pie',\n        data: {\n          labels: ['食材類', '能源類', '運輸類'],\n          datasets: [{\n            label: '碳排放比例',\n            data: [foodEmission / totalEmission.value * 100, energyEmission / totalEmission.value * 100, transportEmission / totalEmission.value * 100],\n            backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56'],\n            hoverOffset: 4\n          }]\n        },\n        options: {\n          responsive: true,\n          plugins: {\n            legend: {\n              position: 'bottom'\n            },\n            tooltip: {\n              callbacks: {\n                label: function (context) {\n                  return context.label + ': ' + context.raw.toFixed(2) + '%';\n                }\n              }\n            }\n          }\n        }\n      });\n    };\n    const resetCalculator = () => {\n      ingredientsForFood.value = [{\n        category: '',\n        name: '',\n        weight: '',\n        items: [],\n        carbon_emission: 0\n      }];\n      ingredientsForEnergy.value = [{\n        category: '7',\n        name: '',\n        weight: '',\n        items: [],\n        carbon_emission: 0\n      }];\n      fetchItems(0, 'energy');\n      ingredientsForTransport.value = [{\n        category: '1',\n        name: '',\n        weight: '',\n        items: [],\n        carbon_emission: 0\n      }];\n      fetchItems(0, 'transport');\n      totalEmission.value = 0.00;\n      carTravel.value = 0;\n      treesSaved.value = 0;\n      if (chartInstance.value) {\n        chartInstance.value.destroy(); // 重置時刪除圖表\n      }\n    };\n    fetchCategories(); // 初始化時分類數據\n\n    return {\n      categories,\n      ingredientsForFood,\n      ingredientsForEnergy,\n      ingredientsForTransport,\n      totalEmission,\n      carTravel,\n      treesSaved,\n      fetchItems,\n      updateCarbonEmission,\n      addRow,\n      calculateEmissions,\n      resetCalculator,\n      detailedData,\n      foodData,\n      energyData,\n      transportData\n    };\n  },\n  mounted() {\n    const ctx = document.getElementById('emissionChart');\n    if (ctx) {\n      ctx.height = 400; // 圖表高度\n    }\n  }\n};","map":{"version":3,"names":["ref","nextTick","computed","axios","Chart","registerables","register","setup","categories","energyCategoryId","transportCategoryId","ingredientsForFood","category","name","weight","items","carbon_emission","ingredientsForEnergy","ingredientsForTransport","totalEmission","carTravel","treesSaved","chartInstance","fetchCategories","get","then","response","value","data","energyCategory","find","cat","category_name","category_id","fetchItems","transportCategory","catch","error","console","index","type","ingredientsArray","updateCarbonEmission","ingredient","alert","selectedItem","item","item_id","unit","addRow","newIngredient","push","length","detailedData","foodData","filter","energyData","transportData","calculateEmissions","foodEmission","reduce","total","energyEmission","transportEmission","toFixed","map","item_name","input_value","source","level","updateChart","ctx","document","getElementById","getContext","destroy","labels","datasets","label","backgroundColor","hoverOffset","options","responsive","plugins","legend","position","tooltip","callbacks","context","raw","resetCalculator","mounted","height"],"sources":["C:\\Users\\user\\carbon-calculator\\src\\App.vue"],"sourcesContent":["<template>\r\n  <div id=\"app\">\r\n\r\n    <!-- Header -->\r\n    <header>\r\n    <nav class=\"navbar fixed-top navbar-expand-lg navbar-dark \" style=\"background-color:  #6abf69;\">\r\n      <div class=\"container-fluid\">\r\n        <a class=\"navbar-brand\" href=\"/src/index.html\">台東減碳x慢食遊</a>\r\n        <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\" aria-controls=\"navbarNav\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n          <span class=\"navbar-toggler-icon\"></span>\r\n        </button>\r\n        <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n          <ul class=\"navbar-nav\">\r\n           \r\n            <li class=\"nav-item\">\r\n              <a class=\"nav-link active\" aria-current=\"page\" href=\"App.vue\">碳排計算機</a>\r\n            </li>\r\n            <li class=\"nav-item\">\r\n              <a class=\"nav-link \"   href=\"slowfood_info.html\">慢食趣</a>\r\n            </li>\r\n            <li class=\"nav-item\">\r\n              <a class=\"nav-link \"  href=\"carbon_info.html\">減碳資訊及平台介紹</a>\r\n            </li>\r\n            <li class=\"nav-item\">\r\n                <a class=\"nav-link \" href=\"restaurent_info.html\">餐廳介紹</a>\r\n              </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n    </header>\r\n    <div class=\"top\">\r\n    <h1>碳排計算機</h1>\r\n    <p>計算您餐點的碳排放量，助力環保</p>\r\n  </div>\r\n    <!-- Main Content -->\r\n    <main>\r\n      <!-- 食材選擇區 食材類 -->\r\n      <section class=\"ingredient-selection\">\r\n        <h2>食材類\r\n          <small style=\"font-size: 0.4em; color: gray; margin-left: 4px;\">(按 + 可新增)</small>\r\n        </h2>\r\n        <div class=\"ingredient-row\" v-for=\"(ingredient, index) in ingredientsForFood\" :key=\"index\">\r\n          <select class=\"ingredient-category\" v-model=\"ingredient.category\" @change=\"fetchItems(index, 'food')\">\r\n            <option value=\"\">選擇種類</option>\r\n            <option v-for=\"category in categories.filter(category => category.category_type === 2)\" :key=\"category.category_id\" :value=\"category.category_id\">\r\n              {{ category.category_name }}\r\n            </option>\r\n          </select>\r\n          <select class=\"ingredient-name\" v-model=\"ingredient.name\" @change=\"updateCarbonEmission(index, 'food')\">\r\n            <option value=\"\">選擇名稱</option>\r\n            <option v-for=\"item in ingredient.items\" :key=\"item.item_id\" :value=\"item.item_id\">\r\n              {{ item.item_name }}\r\n            </option>\r\n          </select>\r\n          <input type=\"number\" class=\"ingredient-weight\" v-model.number=\"ingredient.weight\" @input=\"updateCarbonEmission(index, 'food')\" :placeholder=\"ingredient.unit || '請輸入數值'\">\r\n          <button class=\"add-row\" @click=\"addRow('food')\">+</button>\r\n        </div>\r\n      </section>\r\n    </main>\r\n\r\n    <main>\r\n      <!-- 食材選擇區 能源類 -->\r\n      <section class=\"ingredient-selection\">\r\n        <h2>能源類</h2>\r\n        <div class=\"ingredient-row\" v-for=\"(ingredient, index) in ingredientsForEnergy\" :key=\"index\">\r\n          <select class=\"ingredient-category\" v-model=\"ingredient.category\" @change=\"fetchItems(index, 'energy')\">\r\n            <option value=\"\">選擇種類</option>\r\n            <option v-for=\"category in categories.filter(category => category.category_type === 3)\" :key=\"category.category_id\" :value=\"category.category_id\">\r\n              {{ category.category_name }}\r\n            </option>\r\n          </select>\r\n          <select class=\"ingredient-name\" v-model=\"ingredient.name\" @change=\"updateCarbonEmission(index, 'energy')\">\r\n            <option value=\"\">選擇名稱</option>\r\n            <option v-for=\"item in ingredient.items\" :key=\"item.item_id\" :value=\"item.item_id\">\r\n              {{ item.item_name }}\r\n            </option>\r\n          </select>\r\n          <input type=\"number\" class=\"ingredient-weight\" v-model.number=\"ingredient.weight\" @input=\"updateCarbonEmission(index, 'energy')\" :placeholder=\"ingredient.unit || '請輸入數值'\">\r\n          <button class=\"add-row\" @click=\"addRow('energy')\">+</button>\r\n        </div>\r\n      </section>\r\n    </main>\r\n\r\n    <main>\r\n      <!-- 食材選擇區 運輸類 -->\r\n      <section class=\"ingredient-selection\">\r\n        <h2>運輸類</h2>\r\n        <div class=\"ingredient-row\" v-for=\"(ingredient, index) in ingredientsForTransport\" :key=\"index\">\r\n          <select class=\"ingredient-category\" v-model=\"ingredient.category\" @change=\"fetchItems(index, 'transport')\">\r\n            <option value=\"\">選擇種類</option>\r\n            <option v-for=\"category in categories.filter(category => category.category_type === 1)\" :key=\"category.category_id\" :value=\"category.category_id\">\r\n              {{ category.category_name }}\r\n            </option>\r\n          </select>\r\n          <select class=\"ingredient-name\" v-model=\"ingredient.name\" @change=\"updateCarbonEmission(index, 'transport')\">\r\n            <option value=\"\">選擇名稱</option>\r\n            <option v-for=\"item in ingredient.items\" :key=\"item.item_id\" :value=\"item.item_id\">\r\n              {{ item.item_name }}\r\n            </option>\r\n          </select>\r\n          <input type=\"number\" class=\"ingredient-weight\" v-model.number=\"ingredient.weight\" @input=\"updateCarbonEmission(index, 'transport')\" :placeholder=\"ingredient.unit || '請輸入數值'\">\r\n          <button class=\"add-row\" @click=\"addRow('transport')\">+</button>\r\n        </div>\r\n      </section>\r\n    </main>\r\n\r\n\r\n    <main>\r\n      <!-- 計算按鈕 -->\r\n      <div class=\"button-group\">\r\n        <button class=\"reset-button\" @click=\"resetCalculator\">重新計算</button>\r\n\r\n        <button class=\"calculate-button\" @click=\"calculateEmissions\">計算碳排放</button>\r\n        \r\n      </div>\r\n\r\n      <!-- 結果顯示區 -->\r\n      <section class=\"results\">\r\n        <h2>總碳排放量</h2>\r\n        <p id=\"total-emission\">{{ totalEmission.toFixed(2) }} kg CO₂e</p>\r\n        <div class=\"comparison\">\r\n          <p><span id=\"trees-saved\">{{ treesSaved }}</span> 棵樹木一個月的吸收量</p>\r\n        </div>\r\n\r\n        <!-- 圖表 -->\r\n        <div class=\"chart-container-wrapper\">\r\n          <div class=\"Chart-container\">\r\n            <canvas v-if=\"totalEmission >0\" id=\"emissionChart\"></canvas>\r\n\r\n            <!-- 詳細資料 -->\r\n            <button v-if=\"totalEmission >0\" type=\"button\" class=\"btn btn-dark details-btn\" data-bs-toggle=\"modal\" data-bs-target=\"#detailsModal\">\r\n              詳細資料\r\n            </button>\r\n          </div> \r\n        </div>\r\n      </section>\r\n\r\n      <!-- 模態窗口 -->\r\n      <div class=\"modal fade\" id=\"detailsModal\" tabindex=\"-1\" aria-labelledby=\"detailsModalLabel\" aria-hidden=\"true\">\r\n        <div class=\"modal-dialog modal-lg\">\r\n          <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n              <h5 class=\"modal-title\" id=\"detailsModalLabel\">計算詳細資料</h5>\r\n              <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n              <!-- 單個表格包含所有數據 -->\r\n              <table class=\"table\">\r\n                <thead>\r\n                  <tr>\r\n                    <th scope=\"col\">名稱</th>\r\n                    <th scope=\"col\">重量/距離</th>\r\n                    <th scope=\"col\">碳排放量(kg CO₂e)</th>\r\n                    <th scope=\"col\">資料來源</th>\r\n                    <th scope=\"col\">資料分級 <i class=\"bi bi-info-circle\" style=\"cursor: pointer;\" data-bs-toggle=\"modal\" data-bs-target=\"#infoModal\"></i></th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <!-- 食材類 -->\r\n                  <tr>\r\n                    <td colspan=\"5\"><strong>食材類</strong></td>\r\n                  </tr>\r\n                  <tr v-for=\"item in foodData\" :key=\"item.item_name\">\r\n                    <td>{{ item.item_name }}</td>\r\n                    <td>{{ item.input_value }}</td>\r\n                    <td>{{ item.carbon_emission.toFixed(4) }}</td>\r\n                    <td>{{ item.source }}</td>\r\n                    <td>{{ item.level }}</td>\r\n                  </tr>\r\n                  \r\n                  <!-- 能源類 -->\r\n                  <tr>\r\n                    <td colspan=\"5\"><strong>能源類</strong></td>\r\n                  </tr>\r\n                  <tr v-for=\"item in energyData\" :key=\"item.item_name\">\r\n                    <td>{{ item.item_name }}</td>\r\n                    <td>{{ item.input_value }}</td>\r\n                    <td>{{ item.carbon_emission.toFixed(4) }}</td>\r\n                    <td>{{ item.source }}</td>\r\n                    <td>{{ item.level }}</td>\r\n                  </tr>\r\n\r\n                  <!-- 運輸類 -->\r\n                  <tr>\r\n                    <td colspan=\"5\"><strong>運輸類</strong></td>\r\n                  </tr>\r\n                  <tr v-for=\"item in transportData\" :key=\"item.item_name\">\r\n                    <td>{{ item.item_name }}</td>\r\n                    <td>{{ item.input_value }}</td>\r\n                    <td>{{ item.carbon_emission.toFixed(4) }}</td>\r\n                    <td>{{ item.source }}</td>\r\n                    <td>{{ item.level }}</td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n              <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">關閉</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 資料分級模態窗口 -->\r\n      <div class=\"modal fade\" id=\"infoModal\" tabindex=\"-1\" aria-labelledby=\"infoModalLabel\" aria-hidden=\"true\">\r\n        <div class=\"modal-dialog\">\r\n          <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n              <h5 class=\"modal-title\" id=\"infoModalLabel\">資料來源分級說明</h5>\r\n              <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n              <img src=\"/img/資料來源分級說明.jpg\" alt=\"資料來源分級說明\" class=\"img-fluid\">\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n              <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">關閉</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n\r\n    <!-- Footer -->\r\n    <footer>\r\n      <p>© 2024 餐點碳排放計算機 | 聯絡我們：(089)326141~326146</p>\r\n    </footer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, nextTick, computed } from 'vue';\r\nimport axios from 'axios';\r\nimport { Chart, registerables } from 'chart.js';\r\nimport 'bootstrap/dist/js/bootstrap.bundle.min.js';\r\n\r\nChart.register(...registerables);\r\n\r\nexport default {\r\n  setup() {\r\n    const categories = ref([]);\r\n    const energyCategoryId = '7';  \r\n    const transportCategoryId = '1';  \r\n\r\n    const ingredientsForFood = ref([\r\n      { category: '', name: '', weight: '', items: [], carbon_emission: 0 }\r\n    ]);\r\n    const ingredientsForEnergy = ref([\r\n      { category: energyCategoryId , name: '', weight: '', items: [], carbon_emission: 0 }\r\n    ]);\r\n    const ingredientsForTransport = ref([\r\n      { category: transportCategoryId , name: '', weight: '', items: [], carbon_emission: 0 }\r\n    ]);\r\n    const totalEmission = ref(0.00);\r\n    const carTravel = ref(0);\r\n    const treesSaved = ref(0);\r\n    const chartInstance = ref(null);// Chart.js\r\n\r\n    const fetchCategories = () => {\r\n      axios.get('http://localhost:3001/api/categories')\r\n        .then(response => {\r\n          categories.value = response.data;\r\n\r\n          // 設置能源類的預選項\r\n          const energyCategory = categories.value.find(cat => cat.category_name === '烹煮能源類');\r\n          if (energyCategory) {\r\n            ingredientsForEnergy.value[0].category = energyCategory.category_id;\r\n            fetchItems(0, 'energy'); // 請求該類別的項目\r\n          }\r\n\r\n          // 設置運輸類的預選項\r\n          const transportCategory = categories.value.find(cat => cat.category_name === '運輸類');\r\n          if (transportCategory) {\r\n            ingredientsForTransport.value[0].category = transportCategory.category_id;\r\n            fetchItems(0, 'transport'); // 請求該類別的項目\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.error('There was an error fetching categories!', error);\r\n        });\r\n    };\r\n\r\n    \r\n\r\n    const fetchItems = (index, type) => {\r\n      let ingredientsArray;\r\n      if (type === 'food') {\r\n        ingredientsArray = ingredientsForFood;\r\n      } else if (type === 'energy') {\r\n        ingredientsArray = ingredientsForEnergy;\r\n      } else if (type === 'transport') {\r\n        ingredientsArray = ingredientsForTransport;\r\n      }\r\n\r\n      const category_id = ingredientsArray.value[index].category;\r\n      if (category_id) {\r\n        axios.get(`http://localhost:3001/api/items/${category_id}`)\r\n          .then(response => {\r\n            ingredientsArray.value[index].items = response.data;\r\n            ingredientsArray.value[index].name = ''; // 重製食材\r\n          })\r\n          .catch(error => {\r\n            console.error('There was an error fetching items!', error);\r\n          });\r\n      }\r\n    };\r\n\r\n    fetchCategories(); // 在頁面加載時調用\r\n\r\n    const updateCarbonEmission = (index, type) => {\r\n      let ingredientsArray;\r\n      if (type === 'food') {\r\n        ingredientsArray = ingredientsForFood;\r\n      } else if (type === 'energy') {\r\n        ingredientsArray = ingredientsForEnergy;\r\n      } else if (type === 'transport') {\r\n        ingredientsArray = ingredientsForTransport;\r\n      }\r\n\r\n      const ingredient = ingredientsArray.value[index];\r\n      if (ingredient.weight < 0) {\r\n        alert('重量不可為負值！');\r\n        ingredient.weight = 0;\r\n      }\r\n      const selectedItem = ingredient.items.find(item => item.item_id === ingredient.name);\r\n      if (selectedItem) {\r\n        ingredient.carbon_emission = selectedItem.carbon_emission * ingredient.weight;\r\n        ingredient.unit = selectedItem.unit || '';\r\n      } else {\r\n        ingredient.carbon_emission = 0;\r\n        ingredient.unit = '';\r\n      }\r\n    };\r\n\r\n    const addRow = (type) => {\r\n      let newIngredient=null;\r\n      if (type === 'food') {\r\n        newIngredient = { category: '', name: '', weight: '', items: [], carbon_emission: 0 };\r\n        ingredientsForFood.value.push(newIngredient);\r\n        fetchItems(ingredientsForFood.value.length - 1, 'food');\r\n      } else if (type === 'energy') {\r\n        newIngredient = { category: '7', name: '', weight: '', items: [], carbon_emission: 0 };\r\n        ingredientsForEnergy.value.push(newIngredient);\r\n        fetchItems(ingredientsForEnergy.value.length - 1, 'energy');\r\n      } else if (type === 'transport') {\r\n        newIngredient = { category: '1', name: '', weight: '', items: [], carbon_emission: 0 }; \r\n        ingredientsForTransport.value.push(newIngredient);\r\n        fetchItems(ingredientsForTransport.value.length - 1, 'transport');\r\n      }\r\n    };\r\n\r\n    const detailedData = ref([]);\r\n    const foodData = computed(() => detailedData.value.filter(item => item.category === '食材類'));\r\n    const energyData = computed(() => detailedData.value.filter(item => item.category === '能源類'));\r\n    const transportData = computed(() => detailedData.value.filter(item => item.category === '運輸類'));\r\n\r\n    const calculateEmissions = () => {\r\n      const foodEmission = ingredientsForFood.value.reduce((total, ingredient) => total + ingredient.carbon_emission, 0);\r\n      const energyEmission = ingredientsForEnergy.value.reduce((total, ingredient) => total + ingredient.carbon_emission, 0);\r\n      const transportEmission = ingredientsForTransport.value.reduce((total, ingredient) => total + ingredient.carbon_emission, 0);\r\n\r\n      totalEmission.value = foodEmission + energyEmission + transportEmission;\r\n      carTravel.value = totalEmission.value * 5; // 假設1kg CO2等於行駛5公里\r\n      treesSaved.value = (totalEmission.value / 0.625).toFixed(1); // 假設1kg CO2等於10棵樹一個月的吸收量\r\n\r\n    detailedData.value = [\r\n      ...ingredientsForFood.value.map(ingredient => ({\r\n        category: '食材類',\r\n        item_name: ingredient.items.find(item => item.item_id === ingredient.name)?.item_name || '',\r\n        input_value: ingredient.weight,\r\n        carbon_emission: ingredient.carbon_emission,\r\n        source: ingredient.items.find(item => item.item_id === ingredient.name)?.source || '未知來源',\r\n        level: ingredient.items.find(item => item.item_id === ingredient.name)?.level || '未知'\r\n      })),\r\n      ...ingredientsForEnergy.value.map(ingredient => ({\r\n        category: '能源類',\r\n        item_name: ingredient.items.find(item => item.item_id === ingredient.name)?.item_name || '',\r\n        input_value: ingredient.weight,\r\n        carbon_emission: ingredient.carbon_emission,\r\n        source: ingredient.items.find(item => item.item_id === ingredient.name)?.source || '未知來源',\r\n        level: ingredient.items.find(item => item.item_id === ingredient.name)?.level || '未知'\r\n      })),\r\n      ...ingredientsForTransport.value.map(ingredient => ({\r\n        category: '運輸類',\r\n        item_name: ingredient.items.find(item => item.item_id === ingredient.name)?.item_name || '',\r\n        input_value: ingredient.weight,\r\n        carbon_emission: ingredient.carbon_emission,\r\n        source: ingredient.items.find(item => item.item_id === ingredient.name)?.source || '未知來源',\r\n        level: ingredient.items.find(item => item.item_id === ingredient.name)?.level || '未知'\r\n      }))\r\n    ];\r\n\r\n      // 只有當有碳排放量時才更新圖表並顯示\r\n      if (totalEmission.value > 0) {\r\n        nextTick(() => {\r\n        updateChart(foodEmission, energyEmission, transportEmission);\r\n      });\r\n    }\r\n  };\r\n\r\n    const updateChart = (foodEmission, energyEmission, transportEmission) => {\r\n      const ctx = document.getElementById('emissionChart')?.getContext('2d');\r\n\r\n      if (!ctx) {\r\n        console.error(\"Canvas element not found\");\r\n        return;\r\n      }\r\n\r\n      if (chartInstance.value) {\r\n        chartInstance.value.destroy(); // 如果圖表存在，就刪除\r\n      }\r\n\r\n      chartInstance.value = new Chart(ctx, {\r\n        type: 'pie',\r\n        data: {\r\n          labels: ['食材類', '能源類', '運輸類'],\r\n          datasets: [{\r\n            label: '碳排放比例',\r\n            data: [\r\n              foodEmission / totalEmission.value * 100,\r\n              energyEmission / totalEmission.value * 100,\r\n              transportEmission / totalEmission.value * 100,\r\n            ],\r\n            backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56'],\r\n            hoverOffset: 4\r\n          }]\r\n        },\r\n        options: {\r\n          responsive: true,\r\n          plugins: {\r\n            legend: {\r\n              position: 'bottom',\r\n            },\r\n            tooltip: {\r\n              callbacks: {\r\n                label: function(context) {\r\n                  return context.label + ': ' + context.raw.toFixed(2) + '%';\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      });\r\n    };  \r\n\r\n    const resetCalculator = () => {\r\n      ingredientsForFood.value = [{ category: '', name: '', weight: '', items: [], carbon_emission: 0 }];\r\n      ingredientsForEnergy.value = [{ category: '7', name: '', weight: '', items: [], carbon_emission: 0 }];\r\n      fetchItems(0, 'energy');\r\n      ingredientsForTransport.value = [{ category: '1', name: '', weight: '', items: [], carbon_emission: 0 }];\r\n      fetchItems(0, 'transport');\r\n      totalEmission.value = 0.00;\r\n      carTravel.value = 0;\r\n      treesSaved.value = 0;\r\n\r\n      if (chartInstance.value) {\r\n        chartInstance.value.destroy(); // 重置時刪除圖表\r\n      }\r\n    };\r\n\r\n    fetchCategories(); // 初始化時分類數據\r\n\r\n    return {\r\n      categories,\r\n      ingredientsForFood,\r\n      ingredientsForEnergy,\r\n      ingredientsForTransport,\r\n      totalEmission,\r\n      carTravel,\r\n      treesSaved,\r\n      fetchItems,\r\n      updateCarbonEmission,\r\n      addRow,\r\n      calculateEmissions,\r\n      resetCalculator,\r\n      detailedData,\r\n      foodData,\r\n      energyData,\r\n      transportData\r\n    };\r\n  },\r\n  mounted() {\r\n    const ctx = document.getElementById('emissionChart');\r\n    if (ctx) {\r\n      ctx.height = 400; // 圖表高度\r\n    }\r\n  \r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style src=\"./assets/style.css\"></style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}