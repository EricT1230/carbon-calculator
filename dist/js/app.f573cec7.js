(function(){"use strict";var e={3066:function(e,n,a){var t=a(5130),o=a(6768),i=a(4232);const l={id:"app"},r=(0,o.Fv)('<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous"><header><nav class="navbar fixed-top navbar-expand-lg navbar-dark" style="background-color:#6abf69;"><div class="container-fluid"><a class="navbar-brand" href="index.html">台東減碳x慢食遊</a><button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarNav"><ul class="navbar-nav"><li class="nav-item"><a class="nav-link active" aria-current="page" href="App.vue">碳排計算機</a></li><li class="nav-item"><a class="nav-link" href="slowfood_info.html">慢食趣</a></li><li class="nav-item"><a class="nav-link" href="carbon_info.html">減碳資訊及平台介紹</a></li><li class="nav-item"><a class="nav-link" href="restaurent_info.html">餐廳介紹</a></li></ul></div></div></nav></header><div class="top"><h1>碳排計算機</h1><p>計算您餐點的碳排放量，助力環保</p></div>',3),s={class:"ingredient-selection"},u=(0,o.Lk)("h2",null,[(0,o.eW)("食材類 "),(0,o.Lk)("small",{style:{"font-size":"0.4em",color:"gray","margin-left":"4px"}},"(按 + 可新增)")],-1),c=["onUpdate:modelValue","onChange"],d=(0,o.Lk)("option",{value:""},"選擇種類",-1),p=["value"],g=["onUpdate:modelValue","onChange"],m=(0,o.Lk)("option",{value:""},"選擇名稱",-1),v=["value"],h=["onUpdate:modelValue","onInput","placeholder"],b={class:"ingredient-selection"},f=(0,o.Lk)("h2",null,"能源類",-1),y=["onUpdate:modelValue","onChange"],k=(0,o.Lk)("option",{value:""},"選擇種類",-1),C=["value"],_=["onUpdate:modelValue","onChange"],w=(0,o.Lk)("option",{value:""},"選擇名稱",-1),L=["value"],E=["onUpdate:modelValue","onInput","placeholder"],F={class:"ingredient-selection"},I=(0,o.Lk)("h2",null,"運輸類",-1),X=["onUpdate:modelValue","onChange"],U=(0,o.Lk)("option",{value:""},"選擇種類",-1),V=["value"],K=["onUpdate:modelValue","onChange"],x=(0,o.Lk)("option",{value:""},"選擇名稱",-1),O=["value"],R=["onUpdate:modelValue","onInput","placeholder"],T={class:"button-group"},j={class:"results"},A=(0,o.Lk)("h2",null,"總碳排放量",-1),S={id:"total-emission"},M={class:"comparison"},B={id:"trees-saved"},J=(0,o.Lk)("div",{class:"emissionChart"},[(0,o.Lk)("canvas",{id:"emissionChart"})],-1),P=(0,o.Lk)("footer",null,[(0,o.Lk)("p",null,"© 2024 餐點碳排放計算機 | 聯絡我們：(089)326141~326146")],-1);function N(e,n,a,N,W,Z){return(0,o.uX)(),(0,o.CE)("div",l,[r,(0,o.Lk)("main",null,[(0,o.Lk)("section",s,[u,((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(N.ingredientsForFood,((e,a)=>((0,o.uX)(),(0,o.CE)("div",{class:"ingredient-row",key:a},[(0,o.bo)((0,o.Lk)("select",{class:"ingredient-category","onUpdate:modelValue":n=>e.category=n,onChange:e=>N.fetchItems(a,"food")},[d,((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(N.categories.filter((e=>2===e.category_type)),(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.category_id,value:e.category_id},(0,i.v_)(e.category_name),9,p)))),128))],40,c),[[t.u1,e.category]]),(0,o.bo)((0,o.Lk)("select",{class:"ingredient-name","onUpdate:modelValue":n=>e.name=n,onChange:e=>N.updateCarbonEmission(a,"food")},[m,((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.items,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.item_id,value:e.item_id},(0,i.v_)(e.item_name),9,v)))),128))],40,g),[[t.u1,e.name]]),(0,o.bo)((0,o.Lk)("input",{type:"number",class:"ingredient-weight","onUpdate:modelValue":n=>e.weight=n,onInput:e=>N.updateCarbonEmission(a,"food"),placeholder:e.unit||"請輸入數值"},null,40,h),[[t.Jo,e.weight,void 0,{number:!0}]]),(0,o.Lk)("button",{class:"add-row",onClick:n[0]||(n[0]=e=>N.addRow("food"))},"+")])))),128))])]),(0,o.Lk)("main",null,[(0,o.Lk)("section",b,[f,((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(N.ingredientsForEnergy,((e,a)=>((0,o.uX)(),(0,o.CE)("div",{class:"ingredient-row",key:a},[(0,o.bo)((0,o.Lk)("select",{class:"ingredient-category","onUpdate:modelValue":n=>e.category=n,onChange:e=>N.fetchItems(a,"energy")},[k,((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(N.categories.filter((e=>3===e.category_type)),(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.category_id,value:e.category_id},(0,i.v_)(e.category_name),9,C)))),128))],40,y),[[t.u1,e.category]]),(0,o.bo)((0,o.Lk)("select",{class:"ingredient-name","onUpdate:modelValue":n=>e.name=n,onChange:e=>N.updateCarbonEmission(a,"energy")},[w,((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.items,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.item_id,value:e.item_id},(0,i.v_)(e.item_name),9,L)))),128))],40,_),[[t.u1,e.name]]),(0,o.bo)((0,o.Lk)("input",{type:"number",class:"ingredient-weight","onUpdate:modelValue":n=>e.weight=n,onInput:e=>N.updateCarbonEmission(a,"energy"),placeholder:e.unit||"請輸入數值"},null,40,E),[[t.Jo,e.weight,void 0,{number:!0}]]),(0,o.Lk)("button",{class:"add-row",onClick:n[1]||(n[1]=e=>N.addRow("energy"))},"+")])))),128))])]),(0,o.Lk)("main",null,[(0,o.Lk)("section",F,[I,((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(N.ingredientsForTransport,((e,a)=>((0,o.uX)(),(0,o.CE)("div",{class:"ingredient-row",key:a},[(0,o.bo)((0,o.Lk)("select",{class:"ingredient-category","onUpdate:modelValue":n=>e.category=n,onChange:e=>N.fetchItems(a,"transport")},[U,((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(N.categories.filter((e=>1===e.category_type)),(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.category_id,value:e.category_id},(0,i.v_)(e.category_name),9,V)))),128))],40,X),[[t.u1,e.category]]),(0,o.bo)((0,o.Lk)("select",{class:"ingredient-name","onUpdate:modelValue":n=>e.name=n,onChange:e=>N.updateCarbonEmission(a,"transport")},[x,((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.items,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.item_id,value:e.item_id},(0,i.v_)(e.item_name),9,O)))),128))],40,K),[[t.u1,e.name]]),(0,o.bo)((0,o.Lk)("input",{type:"number",class:"ingredient-weight","onUpdate:modelValue":n=>e.weight=n,onInput:e=>N.updateCarbonEmission(a,"transport"),placeholder:e.unit||"請輸入數值"},null,40,R),[[t.Jo,e.weight,void 0,{number:!0}]]),(0,o.Lk)("button",{class:"add-row",onClick:n[2]||(n[2]=e=>N.addRow("transport"))},"+")])))),128))])]),(0,o.Lk)("main",null,[(0,o.Lk)("div",T,[(0,o.Lk)("button",{class:"reset-button",onClick:n[3]||(n[3]=(...e)=>N.resetCalculator&&N.resetCalculator(...e))},"重新計算"),(0,o.Lk)("button",{class:"calculate-button",onClick:n[4]||(n[4]=(...e)=>N.calculateEmissions&&N.calculateEmissions(...e))},"計算碳排放")]),(0,o.Lk)("section",j,[A,(0,o.Lk)("p",S,(0,i.v_)(N.totalEmission.toFixed(2))+" kg CO₂e",1),(0,o.Lk)("div",M,[(0,o.Lk)("p",null,[(0,o.Lk)("span",B,(0,i.v_)(N.treesSaved),1),(0,o.eW)(" 棵樹木一個月的吸收量")])]),J])]),P])}a(4114);var W=a(144),Z=a(4781),$=a(6912);$.t1.register(...$.$L);var q={setup(){const e=(0,W.KR)([]),n=(0,W.KR)([{category:"",name:"",weight:"",items:[],carbon_emission:0}]),a=(0,W.KR)([{category:"",name:"",weight:"",items:[],carbon_emission:0}]),t=(0,W.KR)([{category:"",name:"",weight:"",items:[],carbon_emission:0}]),o=(0,W.KR)(0),i=(0,W.KR)(0),l=(0,W.KR)(0),r=(0,W.KR)(null),s=()=>{Z.A.get("http://localhost:3001/api/categories").then((n=>{e.value=n.data})).catch((e=>{console.error("There was an error fetching categories!",e)}))},u=(e,o)=>{let i;"food"===o?i=n:"energy"===o?i=a:"transport"===o&&(i=t);const l=i.value[e].category;l&&Z.A.get(`http://localhost:3001/api/items/${l}`).then((n=>{i.value[e].items=n.data,i.value[e].name=""})).catch((e=>{console.error("There was an error fetching items!",e)}))},c=(e,o)=>{let i;"food"===o?i=n:"energy"===o?i=a:"transport"===o&&(i=t);const l=i.value[e];l.weight<0&&(alert("重量不可為負值！"),l.weight=0);const r=l.items.find((e=>e.item_id===l.name));r?(l.carbon_emission=r.carbon_emission*l.weight,l.unit=r.unit||""):(l.carbon_emission=0,l.unit="")},d=e=>{const o={category:"",name:"",weight:"",items:[],carbon_emission:0};"food"===e?n.value.push(o):"energy"===e?a.value.push(o):"transport"===e&&t.value.push(o)},p=()=>{const e=n.value.reduce(((e,n)=>e+n.carbon_emission),0),r=a.value.reduce(((e,n)=>e+n.carbon_emission),0),s=t.value.reduce(((e,n)=>e+n.carbon_emission),0);o.value=e+r+s,i.value=5*o.value,l.value=(o.value/.625).toFixed(1),g(e,r,s)},g=(e,n,a)=>{const t=document.getElementById("emissionChart").getContext("2d");r.value&&r.value.destroy(),r.value=new $.t1(t,{type:"pie",data:{labels:["食材類","能源類","運輸類"],datasets:[{label:"碳排放比例",data:[e/o.value*100,n/o.value*100,a/o.value*100],backgroundColor:["#FF6384","#36A2EB","#FFCE56"],hoverOffset:4}]},options:{responsive:!0,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:function(e){return e.label+": "+e.raw.toFixed(2)+"%"}}}}}})},m=()=>{n.value=[{category:"",name:"",weight:"",items:[],carbon_emission:0}],a.value=[{category:"",name:"",weight:"",items:[],carbon_emission:0}],t.value=[{category:"",name:"",weight:"",items:[],carbon_emission:0}],o.value=0,i.value=0,l.value=0,r.value&&r.value.destroy()};return s(),{categories:e,ingredientsForFood:n,ingredientsForEnergy:a,ingredientsForTransport:t,totalEmission:o,carTravel:i,treesSaved:l,fetchItems:u,updateCarbonEmission:c,addRow:d,calculateEmissions:p,resetCalculator:m}},mounted(){const e=document.getElementById("emissionChart");e&&(e.height=400)}},z=a(1241);const D=(0,z.A)(q,[["render",N]]);var G=D;(0,t.Ef)(G).mount("#app")}},n={};function a(t){var o=n[t];if(void 0!==o)return o.exports;var i=n[t]={exports:{}};return e[t].call(i.exports,i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(n,t,o,i){if(!t){var l=1/0;for(c=0;c<e.length;c++){t=e[c][0],o=e[c][1],i=e[c][2];for(var r=!0,s=0;s<t.length;s++)(!1&i||l>=i)&&Object.keys(a.O).every((function(e){return a.O[e](t[s])}))?t.splice(s--,1):(r=!1,i<l&&(l=i));if(r){e.splice(c--,1);var u=o();void 0!==u&&(n=u)}}return n}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[t,o,i]}}(),function(){a.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(n,{a:n}),n}}(),function(){a.d=function(e,n){for(var t in n)a.o(n,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(n){return 0===e[n]};var n=function(n,t){var o,i,l=t[0],r=t[1],s=t[2],u=0;if(l.some((function(n){return 0!==e[n]}))){for(o in r)a.o(r,o)&&(a.m[o]=r[o]);if(s)var c=s(a)}for(n&&n(t);u<l.length;u++)i=l[u],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(c)},t=self["webpackChunkcarbon_calculator"]=self["webpackChunkcarbon_calculator"]||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))}();var t=a.O(void 0,[504],(function(){return a(3066)}));t=a.O(t)})();
//# sourceMappingURL=app.f573cec7.js.map